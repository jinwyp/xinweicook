<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta name="viewport" content="width=800">
<title>新味</title>
<style>
* {
  margin: 0;
  padding: 0;
  font-size: 15px;
  font-family: 'PingFang SC', 'Helvetica';
  font-weight: 400;
}

.page {
  height: 210mm;
  width: 148mm;
  page-break-after: always;
}

.container {
  width: 88%;
  height: 80%;
  margin: auto;
}

.sign {
  /*margin: auto auto 10mm auto;*/
  width: 90%;
  display: block;
  position: relative;
  bottom: 0;
}

.header {
  width: 100%;
  height: 50mm;
}

.autoIncrementId {
  font-weight: bold;
  font-family: "Helvetica";
  font-size: 48px;
  padding: 5px;
  text-align: center;
  height: 25mm;
  border: 6px solid #000;
  margin: 0 5mm 10mm 0;
  width: 25mm;
  float: left;
}

.info {
  margin: 20mm 0 20mm 38mm;
  width: 95mm;
}

  .info .contactPerson {
    font-size: 24px;
    font-weight: 600;
    display: inline;
  }

  .info .mobile {
    font-size: 24px;
    font-weight: 600;
    display: inline;
  }

  .info .deliveryDateTime {
    font-size: 20px;
    font-weight: bold;
  }

  .info .textField {
    width: 70%;
    display: inline-block;
    font-weight: bold;
    padding-bottom: 2px;
    border-bottom: 1px dotted #000;
  }

  .info p {
    padding-bottom: 2.5mm
  }

  .info .userComment, .info .csComment {
    font-weight: lighter;
  }

    .address .province, .address .city {
      font-size: 13px;
    }
    .address .district, .address .street, .address .address {
      font-weight: bold;
      font-size: 16px;
    }

.cookingType {
  font-size: 17px;
  font-weight: bold;
  margin-top: 5mm;
}

.items {
  width: 100%;
  border: none;
  border-top: 2px dashed #000;
  border-bottom: 2px dashed #000;
  margin: 1em 0;
  padding: 1em 0;
  clear: both;
}

  .items dt {
    font-size: 17px;
    -webkit-min-font-size: 12px;
    -webkit-text-size-adjust: 100%;
    line-height: 40px;
    width: 90%;
    font-weight: bold;
  }

  .items dd {
    text-align: right;
    float: right;
    margin-top: -32px;
    font-weight: lighter;
  }

.price_info {
  width: 100%;
  font-size: 14px;
  line-height: 25px;
  font-weight: lighter;
}

@page {
  size: A5;
  margin: 0;
  padding: 0;
}
</style>
</head>

<body>

<% for(var m = 0; m < orderList.length; m++) { %>

<div class="page">
    <div class="container">
        <div class="header">
            <div class="autoIncrementId"><%= orderList[m].autoIncrementId.toString().substring(2) %></div>
            <div class="info">
                <p class="contactPerson"><%= orderList[m].address.contactPerson %></p>
                <p class="mobile">
                  <%= orderList[m].address.mobile.substring(0, 3) %>
                  <%= orderList[m].address.mobile.substring(3, 7) %>
                  <%= orderList[m].address.mobile.substring(7, 11) %>
                </p>
                <p class="address">
                  <span class="province"><%= orderList[m].address.province %></span>
                  <span class="city"><%= orderList[m].address.city %></span><br/>
                  <span class="district"><%= orderList[m].address.district %></span>
                  <span class="street"><%= orderList[m].address.street %></span>
                  <span class="address"><%= orderList[m].address.address %></span>
                </p>
                <p class="deliveryDateTime">
                  <%= orderList[m].deliveryTime %> 送达
                  <small>(<%= orderList[m].deliveryDate.substring(5) %>)</small>
                </p>
                <p class="userComment">用户备注:
                  <span class="textField">
                    <%= orderList[m].userComment %>　
                  </span>
                </p>
                <p class="csComment">客服备注:
                  <span class="textField">
                    <%= orderList[m].csComment %>　
                  </span>
                </p>
            </div>
        </div>

        <h3 class="cookingType">
          <% if (orderList[m].dishList[0].dish.cookingType == "ready to cook") { %>
            食材包
          <% } else { %>
            便当 / 汤 / 饮料 / 茶
          <% } %>
        </h3>
        <dl class="items">
          <% for(var i=0; i<orderList[m].dishList.length; i++) { %>
            <dt>
              <%= orderList[m].dishList[i].number %> x <%= orderList[m].dishList[i].dish.title.zh %>
              <% if (orderList[m].dishList[i].subDish.length > 0) { %>
                (
                  <% for(var j=0; j<orderList[m].dishList[i].subDish.length; j++) { %>
                    <%= orderList[m].dishList[i].subDish[j].dish.title.zh %>
                  <% } %>
                )
              <% } %>
            </dt>
            <dd>
              <%= orderList[m].dishList[i].dish.priceOriginal %>
              * <%= orderList[m].dishList[i].number %>
              = <%= Number(orderList[m].dishList[i].dish.priceOriginal) * Number(orderList[m].dishList[i].number) %>
            </dd>
          <% } %>
        </dl>

        <div class="price_info">
          订单总额: <strong>¥<%= orderList[m].totalPrice %></strong> =
          ¥<%= orderList[m].dishesPrice %>(商品总额)
          + ¥<%= orderList[m].freight %>(运费)
          <% if (orderList[m].couponDiscount) { %>
            - ¥<%= orderList[m].couponDiscount||0 %>(优惠券)
          <% } %>
          <% if (orderList[m].promotionDiscount) { %>
            - ¥<%= orderList[m].promotionDiscount||0 %>(优惠码)
          <% } %>
          <% if (orderList[m].accountUsedDiscount) { %>
            - ¥<%= orderList[m].accountUsedDiscount||0 %>(新味币)
          <% } %>

        </div>

        <img src="/sign.png" class="sign"/>
    </div>
</div>

<% } %>

</html>
