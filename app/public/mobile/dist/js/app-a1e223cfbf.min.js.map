{"version":3,"sources":["app/public/mobile/src/js/modules.js","app/public/mobile/src/js/directives/add-dish-bar.js","app/public/mobile/src/js/directives/auto-focus.js","app/public/mobile/src/js/directives/back-button.js","app/public/mobile/src/js/directives/coupon-code.js","app/public/mobile/src/js/directives/geetest-sms-button.js","app/public/mobile/src/js/directives/img-lazy-load.js","app/public/mobile/src/js/directives/shopping-progress-bar.js","app/public/mobile/src/js/directives/sms-button.js","app/public/mobile/src/js/directives/flash-class.js","app/public/mobile/src/js/directives/modal.js","app/public/mobile/src/js/directives/confirm.js","app/public/mobile/src/js/service/address.js","app/public/mobile/src/js/service/alert.js","app/public/mobile/src/js/service/debug.js","app/public/mobile/src/js/service/map.js","app/public/mobile/src/js/service/scope-decorator.js","app/public/mobile/src/js/service/utils.js","app/public/mobile/src/js/weixin.js","app/public/mobile/src/js/filters.js","app/public/mobile/src/js/templates.js","app/public/mobile/src/js/models.js","app/public/mobile/src/js/config.js"],"names":["angular","module","directive","Debug","User","$localStorage","$filter","Utils","scope","dish","user","templateUrl","link","$scope","storage","localBag","unwatcher","$watch","mergeCarts","shoppingCart","totalPrice","curSelection","preferences","forEach","property","foodMaterial","some","el","outOfStock","name","zh","addToCart","entry","selection","newEntry","number","count","subDish","Object","keys","map","key","item","isSameItemInCart","sDish","push","hide","postCart","postDishFilter","p","reduce","price","total","cur","priceOriginal","restrict","setTimeout","focus","template","back","history","length","location","href","Coupon","$q","couponPrice","require","attrs","ngModel","$asyncValidators","couponCode","mValue","vValue","value","getCouponInfo","then","res","coupon","data","now","Date","headers","startDate","endDate","reject","resolve","$interval","$window","Alert","$http","valid","mobile","type","stateMachine","action","state","isValid","get","success","result","s","document","createElement","params","gt","width","body","offsetWidth","challenge","src","join","fatherDom","element","getElementById","append","gt_custom_ajax","id","message","find","geetest_challenge","geetest_validate","geetest_seccode","timer","remains","cancel","GeeTest","refresh","e","getSmsCode","console","log","show","validationStatus","showGeetest","$document","$timeout","getDOMTop","elem","top","offsetTop","offsetParent","getWindowBottom","documentElement","clientHeight","scrollY","scrollTop","windowBottom","lazyDOMs","ok","on","i","$eval","attr","splice","dom","imgLazyLoad","pair","_lazyDestroyBinded","$on","path","pathname","watchMobile","assert","code","alert","options","time","duration","className","newVal","oldVal","addClass","removeClass","transclude","close","toggle","preClose","setStatus","event","status","stopPropagation","css","undefined","ignorePreClose","deferred","defer","showModal","promise","confirm","constant","Name","City","Region","factory","codeMsg",1110,1111,1112,1113,2110,3110,3111,3112,3113,3114,3115,3116,4110,5110,5111,5112,5113,"def","msg","provider","that","this","debugKey","$get","isDebug","RegExp","fakeWarehouse","searches","search","test","sessionStorage","getItem","setItem","fakewarehouse","ret","val","prototype","toString","call","JSON","stringify","express","sval","promiseErrFn","topDistance","xinweioffice","caohejing1","bentoNoReach","suggestion","query","region","gcj02ToBd09","y","lat","x","lng","z","Math","sqrt","sin","PI","theta","atan2","cos","bd09ToGcj02","lineDistance","latA","lngA","latB","lngB","earthR","alpha","acos","lineDistance2CHJ","CHJ","warehouseCoords","fixZero","d","lineD","walkingDistance","warehouse","args","Array","isArray","arguments","arg","prefix","encodeURIComponent","results","elements","len","sort","a","b","distance","isInRange","distances","dests","nearestWarehouse","topDistance2HQ","topDistance2CHJ","warehouses","$location","common","nav","utf2b64","str","btoa","unescape","replace","b642utf","decodeURIComponent","escape","window","atob","item1","item2","_id","every","local","server","notInLocal","lDish","getStockId","dishList","idStockMap","f","isPublished","cleanLocalStorage","remain","indexOf","slice","split","obj","defaults","wx","appId","jsApiList","longitude","latitude","ak","oauthUrl","isWeixin","navigator","userAgent","readyState","ready","cb","config","setting","_setting","copy","timestamp","nonceStr","signature","getLocation","fail","shareTimeline","settings","onMenuShareTimeline","shareAppMessage","onMenuShareAppMessage","showOptionMenu","hideOptionMenu","getLocationName","mapUrl","jsonp","getJsconfig","post","url","substr","hash","filter","floor","devicePixelRatio","height","ratio","i2s","scripts","superscripts","subscripts","_","sup","sub","m1","m2","m3","last","title","deliveryDateEat","hour","deliveryTimeEat","deliveryDateCook","day","deliveryTimeCook","segment","eat","cook","extend","times","hasSegment","list","dishes","tType","sType","promotionCode","card","unshift","run","$templateCache","put","getList","cookingType","like","getOne","postOrder","deliveryTime","deliveryEatTime","getOrder","orderId","updateOrder","getUnifiedOrder","cartDate","timeSpan","login","username","password","couponcode","grant_type","access_token","signup","pwd","opts","logout","token_type_hint","token","getUserInfo","updateUser","resetPwd","cart","clearTimeout","bind","catch","noop","applyInvitationCode","invitedFriends","getWeixinUserInfo","exchangeCouponCode","notify","isCharge","out_trade_no","balance","chargeByCode","accountChargeCode","chargeOnline","balanceRecords","wrongMobile","wrongPassword","alreadyExist","notFound","addressIdWrong","addressNotFound","addressLatitudeWrong","addressLongitudeWrong","addressCoordTypeWrong","addressProvinceWrong","addressCityWrong","addressDistrictWrong","addressStreetWrong","addressStreetNumberWrong","addressAddressWrong","addressContactPersonWrong","addressMobileWrong","addressSortOrderWrong","order","orderIdWrong","warehouseIdWrong","cookingTypeWrong","clientFromWrong","creditWrong","freightWrong","paymentWrong","paymentUsedCashWrong","deliveryDateCookWrong","deliveryTimeCookWrong","deliveryDateEatWrong","deliveryTimeEatWrong","dishListArrayWrong","dishListDishNumberWrong","dishListDishIdWrong","dishListSubDishArrayWrong","dishListSubDishNumberWrong","dishListSubDishIdWrong","userCommentWrong","dishIdInvalid","notOnlyDrink","notOverTenDrinks","sms","wrongCode","expired","invalidCode","wrongType","tooManyTries","sendFailed","reachSendLimitation","notStart","used","outOfCount","couponIdWrong","promotionCodeWrong","announcement","announcementIdWrong","noRedirectPath","noRedirectAPI","loginRedirectPath","request","Authorization","responseError","response","redirectPath","RE","$httpProvider","$compileProvider","Accept","language","interceptors","debugInfoEnabled","pick","o","k","_array","compare","tmp","array","l"],"mappings":"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","file":"../js/app-a1e223cfbf.min.js","sourcesContent":["angular.module('xw', ['xw.config', 'xw.services', 'xw.controllers', 'xw.directives', 'xw.filters']);\n\nangular.module('xw.config', ['ngStorage']);\n\nangular.module('xw.models', ['ngStorage']);\n\nangular.module('xw.controllers', ['xw.models', 'xw.weixin']);\n\nangular.module('xw.directives', ['xw.models']);\n\nangular.module('xw.filters', []);\n\nangular.module('xw.weixin', []); // tmp\n\nangular.module('xw.services', []);","angular.module('xw.directives').directive('addDishBar', [\"Debug\", \"User\", \"$localStorage\", \"$filter\", \"Utils\", function (Debug, User, $localStorage, $filter, Utils) {\n    return {\n        scope: {\n            dish: '=',\n            user: '='\n        },\n        templateUrl: 'add-dish-bar.html',\n        link : function ($scope) {\n            var storage = $scope.storage = $localStorage;\n            storage.localBag = storage.localBag || [];\n\n            var unwatcher = $scope.$watch('user', function (user) {\n                if (user) {\n                    unwatcher();\n\n                    storage.localBag = Utils.mergeCarts(storage.localBag || []\n                        , user.shoppingCart);\n                    $scope.totalPrice();\n                }\n            });\n\n            $scope.$watch('dish', function (dish) {\n                if (dish) {\n                    var curSelection = {};\n                    $scope.dish.preferences.forEach(function (property) {\n                        property.foodMaterial.some(function (el) {\n                            if (!el.dish.outOfStock) {\n                                curSelection[property.name.zh] = el.dish;\n                                return true;\n                            } else return false;\n                        })\n                    });\n                    // dish.curSelection存储多属性下的各选中dish,\n                    // 是一个以各属性名为key, 属性下的某个有货dish为value对象\n                    // (尽管一个属性下有可能多个有货dish,但当前选中但只有一个dish)\n                    $scope.dish.curSelection = curSelection;\n                }\n            });\n\n            /**\n             * @param dish 此dish同$scope.dish\n             */\n            $scope.addToCart = function (dish) {\n                var selection = dish.curSelection;\n                var newEntry = {\n                    dish: dish,\n                    number: dish.count,\n                    subDish: Object.keys(selection).map(function (key) {\n                        return {\n                            dish: selection[key],\n                            number: dish.count\n                        };\n                    })\n                };\n\n                // 存在与cart中的与dish的id相同的dish wrapper\n                // - {dish: dish, number:number, subDish: []}\n                var entry;\n\n                storage.localBag.some(function (item) {\n                    if (Utils.isSameItemInCart(item, newEntry)) {\n                        entry = item;\n                        entry.number += newEntry.number;\n                        entry.subDish.forEach(function (sDish) {\n                            sDish.number = entry.number;\n                        });\n                        return true;\n                    }\n                });\n\n                if (!entry) {\n                    storage.localBag.push(newEntry);\n                }\n\n                dish.count = 0;\n\n                $scope.hide();\n\n                User.postCart(storage.localBag.map(postDishFilter));\n\n                $scope.totalPrice();\n            };\n\n            var postDishFilter = $filter('postDish');\n\n            $scope.totalPrice = function () {\n                var p = storage.localBag.reduce(function price(total, cur) {\n                    total += cur.dish.priceOriginal * cur.number;\n                    if (cur.subDish) {\n                        total += cur.subDish.reduce(price, 0)\n                    }\n                    return total;\n                }, 0);\n                return storage.localBag.price = p;\n            };\n\n            $scope.totalPrice();\n\n            $scope.hide = function () {\n                $scope.dish = null;\n            };\n\n        }\n    }\n}])","angular.module('xw.directives').directive('autoFocus', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, el) {\n            setTimeout(function () {\n                el[0].focus();\n            }, 100);\n        }\n    }\n});","angular.module('xw.directives').directive('backButton', function () {\n    return {\n        template: '<div class=\"back-icon\" ng-click=\"back()\"></div>',\n        link: function ($scope) {\n            // 有些路径需要直接调用 navigator.back(), 有些路径\n            $scope.back = function () {\n                if (history.length <= 1) location.href = '/mobile/';\n                history.back();\n            }\n        }\n    }\n})","angular.module('xw.directives').directive('couponCode', [\"Coupon\", \"$q\", function (Coupon, $q) {\n    return {\n        restrict: 'A',\n        scope: {couponPrice: '=couponCode'},\n        require: '?ngModel',\n        link: function (scope, el, attrs, ngModel) {\n            if (!ngModel) return;\n\n            ngModel.$asyncValidators.couponCode = function (mValue, vValue) {\n                var value = mValue || vValue;\n\n                if (!value) return $q.resolve(1);\n\n                value = value.length == 8 ? 'zz' + value : value;\n\n                return Coupon.getCouponInfo(value).then(function (res) {\n                    var coupon = res.data;\n                    var now = new Date(res.headers('date'));\n                    var startDate = new Date(coupon.startDate);\n                    var endDate = new Date(coupon.endDate);\n                    // todo: check price limit\n                    if (startDate <= now && now <= endDate) {\n                        scope.couponPrice = coupon.price;\n                        // todo: 价格限制\n                    } else {\n                        return $q.reject('未在可使用期限内');\n                    }\n                })\n            }\n        }\n    }\n}]);","angular.module('xw.directives').directive('geetestSmsButton', [\"Debug\", \"User\", \"$interval\", \"$window\", \"Alert\", \"$http\", function (Debug, User, $interval, $window, Alert, $http) {\n    return {\n        scope: {\n            valid: '@',\n            mobile: '@',\n            type: '@'\n        },\n        templateUrl: 'geetest-sms-button.html',\n        link : function (scope) {\n            $http.get('/api/user/signup/geetest/register').success(function(result) {\n                var s = document.createElement('script');\n                var params = {\n                    //'745d959dec1191e086febd11aa684c9d'\n                    gt: 'd41d16df5b99010ec511ec10aaaafcb8',\n                    width: document.body.offsetWidth,\n                    challenge: result.challenge\n                };\n\n                s.src = 'http://api.geetest.com/get.php?' + Object.keys(params)\n                        .map(function (key) {return key + '=' + params[key]})\n                        .join('&');\n\n\n                var fatherDom = angular.element(document.getElementById('geetestContainer'));\n\n                fatherDom.append(s);//append the script where ever you want\n\n                $window.gt_custom_ajax = function(result, id, message) {\n                    if(result) {\n                        var value = angular.element(document.getElementById('geetestContainer')).find('input');\n\n                        var data = {\n                            \"geetest_challenge\":value[0].value,\n                            \"geetest_validate\":value[1].value,\n                            \"geetest_seccode\":value[2].value,\n                            \"type\" : scope.type,\n                            \"mobile\" : scope.mobile\n                        };\n\n                        var timer = $interval(function () {\n                            if (!--scope.remains) {\n                                $interval.cancel(timer);\n                                scope.remains = remains;\n\n                                stateMachine('show-refetch', scope.valid == 'true');\n                                try {\n                                    GeeTest[0].refresh()\n                                } catch (e) {}\n                            }\n                        }, 1000);\n\n                        User.getSmsCode(data).success(function() {\n                            console.log(\"success\")\n                        }).catch(function (res) {\n                            Alert.show(res.data.validationStatus, '验证码发送失败');\n                        });\n\n                        stateMachine('hide-geetest')\n                    }\n                }\n            });\n\n            var remains = 30;\n            scope.remains = 30;\n\n            scope.$watch('mobile', function (mobile) {\n                stateMachine('mobile', scope.valid == 'true')\n            });\n\n            scope.showGeetest = function () {\n                stateMachine('show-geetest');\n            };\n\n            // {0: init-not-ready, 1: init-ready, 2: hide-btn-show-geetest,\n            //  3: hide-geetest-show-sending 4 show-re-btn-invalid, 5 re-btn}\n            scope.state = 0;\n            function stateMachine(action, data) {\n                var state = scope.state, isValid = !!data;\n                if (action == 'mobile') {\n                    if (state === 0 && isValid) {\n                        scope.state = 1;\n                    } else if (state == 1 && !isValid) {\n                        scope.state = 0;\n                    } else if (state == 2 && !isValid) {\n                        scope.state = 4;\n                    }\n                    else if (state == 4 && isValid) {\n                        scope.state = 5;\n                    } else if (state == 5 && !isValid) {\n                        scope.state = 4;\n                    }\n                } else if (action == 'show-geetest') {\n                    if (state == 1 || state == 5) {\n                        scope.state = 2;\n                    }\n                } else if (action == 'hide-geetest') {\n                    if (state == 2) {\n                        scope.state = 3;\n                    }\n                } else if (action == 'show-refetch') {\n                    if (state == 3) {\n                        scope.state = isValid ? 5 : 4;\n                    }\n                }\n            }\n        }\n    }\n}])","angular.module('xw.directives').directive('imgLazyLoad', ['$window', '$document', '$timeout', function ($window, $document, $timeout) {\n\n    var lazyDOMs = [],\n        document = $document[0],\n        windowBottom;\n\n    /**\n     * 获取目标元素距离根元素的高度\n     */\n    function getDOMTop(elem) {\n        var top = elem.offsetTop;\n        while (elem = elem.offsetParent) {\n            top += elem.offsetTop\n        }\n        return top;\n    }\n\n    function getWindowBottom() {\n        return document.documentElement.clientHeight + ($window.scrollY ||\n            document.documentElement.scrollTop || document.body.scrollTop);\n    }\n\n    getWindowBottom.ok = true;\n\n    angular.element($window).on('scroll', function () {\n        windowBottom = getWindowBottom();\n        for (var i = 0, el; i < lazyDOMs.length;) {\n            if (getDOMTop(lazyDOMs[i][0]) < windowBottom) {\n                el = angular.element(lazyDOMs[i][0]);\n                el[0].src = lazyDOMs[i][1].$eval(el.attr('img-lazy-load'));\n                lazyDOMs.splice(i, 1);\n            } else {\n                i++;\n            }\n        }\n    });\n\n    return {\n        restrict: 'A',\n        link: function (scope, el, attr) {\n            var dom = el[0];\n            lazyDOMs.push([dom, scope]);\n            var unwatcher = scope.$watch(attr.imgLazyLoad, function (src) {\n                if (src) {\n                    unwatcher();\n                    if (getWindowBottom.ok) {\n                        windowBottom = getWindowBottom();\n                        getWindowBottom.ok = false;\n                        setTimeout(function () {\n                            getWindowBottom.ok = true;\n                        }, 120); // 120 ms内不再计算window bottom\n                        // qq 浏览器会忽略100ms以下的setTimeout !!!!\n                        // http://www.qianduan.net/qqliu-lan-qi-x5nei-he-wen-ti-hui-zong/\n                    }\n                    // todo: 试着用setTimeout来比较这里的性能\n                    if (getDOMTop(dom) < windowBottom) {\n                        lazyDOMs.some(function (pair, i) {\n                            if (pair[0] == dom) {\n                                dom.src = src;\n                                lazyDOMs.splice(i, 1);\n                                return true;\n                            }\n                        })\n                    }\n                }\n            });\n\n            if (!scope._lazyDestroyBinded) {\n                scope._lazyDestroyBinded = true;\n                scope.$on('$destroy', function () {\n                    for (var i = 0; i < lazyDOMs.length;) {\n                        if (lazyDOMs[i][1] == scope) {\n                            lazyDOMs.splice(i, 1);\n                        } else {\n                            i++;\n                        }\n                    }\n                })\n            }\n        }\n    }\n}])","angular.module('xw.directives').directive('shoppingProgressBar', function () {\n    return {\n        templateUrl: 'shopping-progress-bar.html',\n        scope: true,\n        link: function (scope) {\n            var path = location.pathname;\n            if (path == '/mobile/cart') {\n                scope.state = 'state1';\n            } else if (path == '/mobile/orderaddress') {\n                scope.state = 'state2'\n            } else if (path == '/mobile/orderpay') {\n                scope.state = 'state3'\n            }\n        }\n    }\n})","angular.module('xw.directives').directive('smsButton', [\"Debug\", \"User\", \"$interval\", function (Debug, User, $interval) {\n    return {\n        scope: {\n            valid: '@',\n            mobile: '@',\n            type: '@'\n        },\n        templateUrl: 'sms-button.html',\n        link : function (scope) {\n            scope.state = 0; // {0: init-not-ready, 1: init-ready, 2: receiving, 3: refetch-not-ready, 4: refetch-ready}\n            scope.remains = 60;\n\n            var cancel = watchMobile();\n\n            scope.getSmsCode = function () {\n                scope.state = 2;\n                if (cancel) {\n                    cancel();\n                    cancel = null;\n                }\n\n                var timer = $interval(function () {\n                    if (!--scope.remains) {\n                        $interval.cancel(timer);\n                        scope.remains = 60;\n\n                        Debug.assert(typeof scope.valid == 'string', '由@传入的valid应当是string');\n                        if (scope.valid === 'true') {\n                            scope.state = 4;\n                        } else {\n                            scope.state = 3;\n                        }\n\n                        // 重新 watch mobile\n                        cancel = watchMobile();\n                    }\n                }, 1000);\n\n                User.getSmsCode({\n                    mobile: scope.mobile,\n                    type: scope.type\n                }).then(function (res) {\n                    //dev\n                    if (res.data.code) {\n                        // todo: should alert some thing?\n                    }\n                }).catch(function (res) {\n                    // todo: should alert some thing?\n                    alert('获取验证码失败,请稍后重试');\n                    Debug.alert(res);\n                })\n            };\n\n            function watchMobile() {\n                return scope.$watch('mobile', function (mobile) {\n                    if (scope.state === 0 && mobile && mobile.length == 11) {\n                        scope.state = 1;\n                    } else if (scope.state === 1 && (!mobile || mobile.length != 11)) {\n                        scope.state = 0;\n                    } else if (scope.state === 3 && mobile && mobile.length ==11) {\n                        scope.state = 4;\n                    } else if (scope.state === 4 && (!mobile || mobile.length != 11)) {\n                        scope.state = 3;\n                    }\n                })\n            }\n        }\n    }\n}])","angular.module('xw.directives').directive('flashClass', function () {\n    return {\n        restrict: 'A',\n        scope: {options: '=flashClass'},\n        require: '?ngModel',\n        link: function (scope, el) {\n            var time = scope.options.duration || 700;\n            var className = scope.options.className || 'flash';\n            scope.$watch('options.exp', function (newVal, oldVal) {\n                if (((newVal == oldVal) && newVal) || newVal) {\n                    setTimeout(function () {\n                        el.addClass(className);\n                        setTimeout(function () {\n                            el.removeClass(className)\n                        }, time)\n                    }, 200)\n                }\n            })\n        }\n    }\n});","angular.module('xw.directives').directive('modal', function () {\n    return {\n        restrict: 'E',\n        transclude: true,\n        scope: {\n            show: \"=\",\n            close: '=',\n            toggle: '=',\n            preClose: '=?'\n        },\n        templateUrl: 'modal.html',\n        link: function (scope, el, attrs) {\n            scope.css = {show: false};\n\n            if (attrs.default == 'show') {\n                scope.css.show = true;\n            }\n\n            scope.show = function () {\n                setStatus(event, true);\n            };\n\n            scope.close = function (ignorePreClose) {\n                if (!ignorePreClose && scope.preClose) {\n                    scope.preClose();\n                }\n                setStatus(event, false);\n            };\n\n            scope.toggle = function () {\n                setStatus(event);\n            };\n\n            function setStatus(event, status) {\n                event.stopPropagation();\n                if (status === undefined) {\n                    scope.css.show = !scope.css.show;\n                } else {\n                    scope.css.show = status;\n                }\n            }\n        }\n    }\n});","angular.module('xw.directives').directive('confirm', [\"$q\", function ($q) {\n    return {\n        restrict: 'E',\n        transclude: true,\n        scope: {\n            show: \"=\"\n        },\n        templateUrl: 'confirm.html',\n        link: function (scope) {\n            var deferred;\n            scope.show = function () {\n                deferred = $q.defer();\n                scope.showModal();\n                return deferred.promise;\n            };\n\n            scope.confirm = function () {\n                scope.close(true);\n                deferred.resolve(true);\n            };\n\n            scope.cancel = function () {\n                scope.close();\n            };\n\n            scope.preClose = function () {\n                deferred.resolve(false);\n            }\n        }\n    }\n}]);","angular.module('xw.services').constant('Address', [\n    {\n        \"Name\": \"天津\",\n        \"City\": [\n            {\n                \"Name\": \"天津\",\n                \"Region\": [\n                    {\n                        \"Name\": \"和平\"\n                    },\n                    {\n                        \"Name\": \"东丽\"\n                    },\n                    {\n                        \"Name\": \"西青\"\n                    },\n                    {\n                        \"Name\": \"津南\"\n                    },\n                    {\n                        \"Name\": \"北辰\"\n                    },\n                    {\n                        \"Name\": \"河东\"\n                    },\n                    {\n                        \"Name\": \"宁河\"\n                    },\n                    {\n                        \"Name\": \"武清\"\n                    },\n                    {\n                        \"Name\": \"静海\"\n                    },\n                    {\n                        \"Name\": \"宝坻\"\n                    },\n                    {\n                        \"Name\": \"蓟县\"\n                    },\n                    {\n                        \"Name\": \"河西\"\n                    },\n                    {\n                        \"Name\": \"南开\"\n                    },\n                    {\n                        \"Name\": \"河北\"\n                    },\n                    {\n                        \"Name\": \"红桥\"\n                    },\n                    {\n                        \"Name\": \"滨海新区\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"辽宁\",\n        \"City\": [\n            {\n                \"Name\": \"大连\",\n                \"Region\": [\n                    {\n                        \"Name\": \"中山区\"\n                    },\n                    {\n                        \"Name\": \"西岗区\"\n                    },\n                    {\n                        \"Name\": \"沙河口区\"\n                    },\n                    {\n                        \"Name\": \"甘井子区\"\n                    },\n                    {\n                        \"Name\": \"旅顺口区\"\n                    },\n                    {\n                        \"Name\": \"金州区\"\n                    },\n                    {\n                        \"Name\": \"长海县\"\n                    },\n                    {\n                        \"Name\": \"瓦房店市\"\n                    },\n                    {\n                        \"Name\": \"普兰店市\"\n                    },\n                    {\n                        \"Name\": \"庄河市\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"上海\",\n        \"City\": [\n            {\n                \"Name\": \"上海\",\n                \"Region\": [\n                    {\n                        \"Name\": \"黄浦\"\n                    },\n                    {\n                        \"Name\": \"杨浦\"\n                    },\n                    {\n                        \"Name\": \"闵行\"\n                    },\n                    {\n                        \"Name\": \"宝山\"\n                    },\n                    {\n                        \"Name\": \"嘉定\"\n                    },\n                    {\n                        \"Name\": \"浦东新区\"\n                    },\n                    {\n                        \"Name\": \"金山\"\n                    },\n                    {\n                        \"Name\": \"松江\"\n                    },\n                    {\n                        \"Name\": \"奉贤\"\n                    },\n                    {\n                        \"Name\": \"青浦\"\n                    },\n                    {\n                        \"Name\": \"卢湾\"\n                    },\n                    {\n                        \"Name\": \"徐汇\"\n                    },\n                    {\n                        \"Name\": \"长宁\"\n                    },\n                    {\n                        \"Name\": \"静安\"\n                    },\n                    {\n                        \"Name\": \"普陀\"\n                    },\n                    {\n                        \"Name\": \"闸北\"\n                    },\n                    {\n                        \"Name\": \"虹口\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"江苏\",\n        \"City\": [\n            {\n                \"Name\": \"南京\",\n                \"Region\": [\n                    {\n                        \"Name\": \"玄武区\"\n                    },\n                    {\n                        \"Name\": \"白下区\"\n                    },\n                    {\n                        \"Name\": \"秦淮区\"\n                    },\n                    {\n                        \"Name\": \"建邺区\"\n                    },\n                    {\n                        \"Name\": \"鼓楼区\"\n                    },\n                    {\n                        \"Name\": \"下关区\"\n                    },\n                    {\n                        \"Name\": \"浦口区\"\n                    },\n                    {\n                        \"Name\": \"栖霞区\"\n                    },\n                    {\n                        \"Name\": \"雨花台区\"\n                    },\n                    {\n                        \"Name\": \"江宁区\"\n                    },\n                    {\n                        \"Name\": \"六合区\"\n                    },\n                    {\n                        \"Name\": \"溧水县\"\n                    },\n                    {\n                        \"Name\": \"高淳县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"扬州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"广陵区\"\n                    },\n                    {\n                        \"Name\": \"邗江区\"\n                    },\n                    {\n                        \"Name\": \"维扬区\"\n                    },\n                    {\n                        \"Name\": \"宝应县\"\n                    },\n                    {\n                        \"Name\": \"仪征市\"\n                    },\n                    {\n                        \"Name\": \"高邮市\"\n                    },\n                    {\n                        \"Name\": \"江都市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"镇江\",\n                \"Region\": [\n                    {\n                        \"Name\": \"京口区\"\n                    },\n                    {\n                        \"Name\": \"润州区\"\n                    },\n                    {\n                        \"Name\": \"丹徒区\"\n                    },\n                    {\n                        \"Name\": \"丹阳市\"\n                    },\n                    {\n                        \"Name\": \"扬中市\"\n                    },\n                    {\n                        \"Name\": \"句容市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"泰州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"海陵区\"\n                    },\n                    {\n                        \"Name\": \"高港区\"\n                    },\n                    {\n                        \"Name\": \"兴化市\"\n                    },\n                    {\n                        \"Name\": \"靖江市\"\n                    },\n                    {\n                        \"Name\": \"泰兴市\"\n                    },\n                    {\n                        \"Name\": \"姜堰市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"宿迁\",\n                \"Region\": [\n                    {\n                        \"Name\": \"宿城区\"\n                    },\n                    {\n                        \"Name\": \"宿豫区\"\n                    },\n                    {\n                        \"Name\": \"沭阳县\"\n                    },\n                    {\n                        \"Name\": \"泗阳县\"\n                    },\n                    {\n                        \"Name\": \"泗洪县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"无锡\",\n                \"Region\": [\n                    {\n                        \"Name\": \"崇安区\"\n                    },\n                    {\n                        \"Name\": \"南长区\"\n                    },\n                    {\n                        \"Name\": \"北塘区\"\n                    },\n                    {\n                        \"Name\": \"锡山区\"\n                    },\n                    {\n                        \"Name\": \"惠山区\"\n                    },\n                    {\n                        \"Name\": \"滨湖区\"\n                    },\n                    {\n                        \"Name\": \"江阴市\"\n                    },\n                    {\n                        \"Name\": \"宜兴市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"徐州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"鼓楼区\"\n                    },\n                    {\n                        \"Name\": \"云龙区\"\n                    },\n                    {\n                        \"Name\": \"九里区\"\n                    },\n                    {\n                        \"Name\": \"贾汪区\"\n                    },\n                    {\n                        \"Name\": \"泉山区\"\n                    },\n                    {\n                        \"Name\": \"丰县\"\n                    },\n                    {\n                        \"Name\": \"沛县\"\n                    },\n                    {\n                        \"Name\": \"铜山县\"\n                    },\n                    {\n                        \"Name\": \"睢宁县\"\n                    },\n                    {\n                        \"Name\": \"新沂市\"\n                    },\n                    {\n                        \"Name\": \"邳州市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"常州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"天宁区\"\n                    },\n                    {\n                        \"Name\": \"钟楼区\"\n                    },\n                    {\n                        \"Name\": \"戚墅堰区\"\n                    },\n                    {\n                        \"Name\": \"新北区\"\n                    },\n                    {\n                        \"Name\": \"武进区\"\n                    },\n                    {\n                        \"Name\": \"溧阳市\"\n                    },\n                    {\n                        \"Name\": \"金坛市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"苏州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"沧浪区\"\n                    },\n                    {\n                        \"Name\": \"平江区\"\n                    },\n                    {\n                        \"Name\": \"金阊区\"\n                    },\n                    {\n                        \"Name\": \"虎丘区\"\n                    },\n                    {\n                        \"Name\": \"吴中区\"\n                    },\n                    {\n                        \"Name\": \"相城区\"\n                    },\n                    {\n                        \"Name\": \"常熟市\"\n                    },\n                    {\n                        \"Name\": \"张家港市\"\n                    },\n                    {\n                        \"Name\": \"昆山市\"\n                    },\n                    {\n                        \"Name\": \"吴江市\"\n                    },\n                    {\n                        \"Name\": \"太仓市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"南通\",\n                \"Region\": [\n                    {\n                        \"Name\": \"崇川区\"\n                    },\n                    {\n                        \"Name\": \"港闸区\"\n                    },\n                    {\n                        \"Name\": \"海安县\"\n                    },\n                    {\n                        \"Name\": \"如东县\"\n                    },\n                    {\n                        \"Name\": \"启东市\"\n                    },\n                    {\n                        \"Name\": \"如皋市\"\n                    },\n                    {\n                        \"Name\": \"通州市\"\n                    },\n                    {\n                        \"Name\": \"海门市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"连云港\",\n                \"Region\": [\n                    {\n                        \"Name\": \"连云区\"\n                    },\n                    {\n                        \"Name\": \"新浦区\"\n                    },\n                    {\n                        \"Name\": \"海州区\"\n                    },\n                    {\n                        \"Name\": \"赣榆县\"\n                    },\n                    {\n                        \"Name\": \"东海县\"\n                    },\n                    {\n                        \"Name\": \"灌云县\"\n                    },\n                    {\n                        \"Name\": \"灌南县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"淮安\",\n                \"Region\": [\n                    {\n                        \"Name\": \"清河区\"\n                    },\n                    {\n                        \"Name\": \"楚州区\"\n                    },\n                    {\n                        \"Name\": \"淮阴区\"\n                    },\n                    {\n                        \"Name\": \"清浦区\"\n                    },\n                    {\n                        \"Name\": \"涟水县\"\n                    },\n                    {\n                        \"Name\": \"洪泽县\"\n                    },\n                    {\n                        \"Name\": \"盱眙县\"\n                    },\n                    {\n                        \"Name\": \"金湖县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"盐城\",\n                \"Region\": [\n                    {\n                        \"Name\": \"亭湖区\"\n                    },\n                    {\n                        \"Name\": \"盐都区\"\n                    },\n                    {\n                        \"Name\": \"响水县\"\n                    },\n                    {\n                        \"Name\": \"滨海县\"\n                    },\n                    {\n                        \"Name\": \"阜宁县\"\n                    },\n                    {\n                        \"Name\": \"射阳县\"\n                    },\n                    {\n                        \"Name\": \"建湖县\"\n                    },\n                    {\n                        \"Name\": \"东台市\"\n                    },\n                    {\n                        \"Name\": \"大丰市\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"浙江\",\n        \"City\": [\n            {\n                \"Name\": \"杭州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"上城区\"\n                    },\n                    {\n                        \"Name\": \"下城区\"\n                    },\n                    {\n                        \"Name\": \"江干区\"\n                    },\n                    {\n                        \"Name\": \"拱墅区\"\n                    },\n                    {\n                        \"Name\": \"西湖区\"\n                    },\n                    {\n                        \"Name\": \"滨江区\"\n                    },\n                    {\n                        \"Name\": \"萧山区\"\n                    },\n                    {\n                        \"Name\": \"余杭区\"\n                    },\n                    {\n                        \"Name\": \"桐庐县\"\n                    },\n                    {\n                        \"Name\": \"淳安县\"\n                    },\n                    {\n                        \"Name\": \"建德市\"\n                    },\n                    {\n                        \"Name\": \"富阳市\"\n                    },\n                    {\n                        \"Name\": \"临安市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"台州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"椒江区\"\n                    },\n                    {\n                        \"Name\": \"黄岩区\"\n                    },\n                    {\n                        \"Name\": \"路桥区\"\n                    },\n                    {\n                        \"Name\": \"玉环县\"\n                    },\n                    {\n                        \"Name\": \"三门县\"\n                    },\n                    {\n                        \"Name\": \"天台县\"\n                    },\n                    {\n                        \"Name\": \"仙居县\"\n                    },\n                    {\n                        \"Name\": \"温岭市\"\n                    },\n                    {\n                        \"Name\": \"临海市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"丽水\",\n                \"Region\": [\n                    {\n                        \"Name\": \"莲都区\"\n                    },\n                    {\n                        \"Name\": \"青田县\"\n                    },\n                    {\n                        \"Name\": \"缙云县\"\n                    },\n                    {\n                        \"Name\": \"遂昌县\"\n                    },\n                    {\n                        \"Name\": \"松阳县\"\n                    },\n                    {\n                        \"Name\": \"云和县\"\n                    },\n                    {\n                        \"Name\": \"庆元县\"\n                    },\n                    {\n                        \"Name\": \"景宁畲族自治县\"\n                    },\n                    {\n                        \"Name\": \"龙泉市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"宁波\",\n                \"Region\": [\n                    {\n                        \"Name\": \"海曙区\"\n                    },\n                    {\n                        \"Name\": \"江东区\"\n                    },\n                    {\n                        \"Name\": \"江北区\"\n                    },\n                    {\n                        \"Name\": \"北仑区\"\n                    },\n                    {\n                        \"Name\": \"镇海区\"\n                    },\n                    {\n                        \"Name\": \"鄞州区\"\n                    },\n                    {\n                        \"Name\": \"象山县\"\n                    },\n                    {\n                        \"Name\": \"宁海县\"\n                    },\n                    {\n                        \"Name\": \"余姚市\"\n                    },\n                    {\n                        \"Name\": \"慈溪市\"\n                    },\n                    {\n                        \"Name\": \"奉化市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"温州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"鹿城区\"\n                    },\n                    {\n                        \"Name\": \"龙湾区\"\n                    },\n                    {\n                        \"Name\": \"瓯海区\"\n                    },\n                    {\n                        \"Name\": \"洞头县\"\n                    },\n                    {\n                        \"Name\": \"永嘉县\"\n                    },\n                    {\n                        \"Name\": \"平阳县\"\n                    },\n                    {\n                        \"Name\": \"苍南县\"\n                    },\n                    {\n                        \"Name\": \"文成县\"\n                    },\n                    {\n                        \"Name\": \"泰顺县\"\n                    },\n                    {\n                        \"Name\": \"瑞安市\"\n                    },\n                    {\n                        \"Name\": \"乐清市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"嘉兴\",\n                \"Region\": [\n                    {\n                        \"Name\": \"南湖区\"\n                    },\n                    {\n                        \"Name\": \"秀洲区\"\n                    },\n                    {\n                        \"Name\": \"嘉善县\"\n                    },\n                    {\n                        \"Name\": \"海盐县\"\n                    },\n                    {\n                        \"Name\": \"海宁市\"\n                    },\n                    {\n                        \"Name\": \"平湖市\"\n                    },\n                    {\n                        \"Name\": \"桐乡市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"湖州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"吴兴区\"\n                    },\n                    {\n                        \"Name\": \"南浔区\"\n                    },\n                    {\n                        \"Name\": \"德清县\"\n                    },\n                    {\n                        \"Name\": \"长兴县\"\n                    },\n                    {\n                        \"Name\": \"安吉县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"绍兴\",\n                \"Region\": [\n                    {\n                        \"Name\": \"越城区\"\n                    },\n                    {\n                        \"Name\": \"绍兴县\"\n                    },\n                    {\n                        \"Name\": \"新昌县\"\n                    },\n                    {\n                        \"Name\": \"诸暨市\"\n                    },\n                    {\n                        \"Name\": \"上虞市\"\n                    },\n                    {\n                        \"Name\": \"嵊州市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"金华\",\n                \"Region\": [\n                    {\n                        \"Name\": \"婺城区\"\n                    },\n                    {\n                        \"Name\": \"金东区\"\n                    },\n                    {\n                        \"Name\": \"武义县\"\n                    },\n                    {\n                        \"Name\": \"浦江县\"\n                    },\n                    {\n                        \"Name\": \"磐安县\"\n                    },\n                    {\n                        \"Name\": \"兰溪市\"\n                    },\n                    {\n                        \"Name\": \"义乌市\"\n                    },\n                    {\n                        \"Name\": \"东阳市\"\n                    },\n                    {\n                        \"Name\": \"永康市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"衢州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"柯城区\"\n                    },\n                    {\n                        \"Name\": \"衢江区\"\n                    },\n                    {\n                        \"Name\": \"常山县\"\n                    },\n                    {\n                        \"Name\": \"开化县\"\n                    },\n                    {\n                        \"Name\": \"龙游县\"\n                    },\n                    {\n                        \"Name\": \"江山市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"舟山\",\n                \"Region\": [\n                    {\n                        \"Name\": \"定海区\"\n                    },\n                    {\n                        \"Name\": \"普陀区\"\n                    },\n                    {\n                        \"Name\": \"岱山县\"\n                    },\n                    {\n                        \"Name\": \"嵊泗县\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"安徽\",\n        \"City\": [\n            {\n                \"Name\": \"合肥\",\n                \"Region\": [\n                    {\n                        \"Name\": \"瑶海区\"\n                    },\n                    {\n                        \"Name\": \"庐阳区\"\n                    },\n                    {\n                        \"Name\": \"蜀山区\"\n                    },\n                    {\n                        \"Name\": \"包河区\"\n                    },\n                    {\n                        \"Name\": \"长丰县\"\n                    },\n                    {\n                        \"Name\": \"肥东县\"\n                    },\n                    {\n                        \"Name\": \"肥西县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"黄山\",\n                \"Region\": [\n                    {\n                        \"Name\": \"屯溪区\"\n                    },\n                    {\n                        \"Name\": \"黄山区\"\n                    },\n                    {\n                        \"Name\": \"徽州区\"\n                    },\n                    {\n                        \"Name\": \"歙县\"\n                    },\n                    {\n                        \"Name\": \"休宁县\"\n                    },\n                    {\n                        \"Name\": \"黟县\"\n                    },\n                    {\n                        \"Name\": \"祁门县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"滁州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"琅琊区\"\n                    },\n                    {\n                        \"Name\": \"南谯区\"\n                    },\n                    {\n                        \"Name\": \"来安县\"\n                    },\n                    {\n                        \"Name\": \"全椒县\"\n                    },\n                    {\n                        \"Name\": \"定远县\"\n                    },\n                    {\n                        \"Name\": \"凤阳县\"\n                    },\n                    {\n                        \"Name\": \"天长市\"\n                    },\n                    {\n                        \"Name\": \"明光市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"阜阳\",\n                \"Region\": [\n                    {\n                        \"Name\": \"颍州区\"\n                    },\n                    {\n                        \"Name\": \"颍东区\"\n                    },\n                    {\n                        \"Name\": \"颍泉区\"\n                    },\n                    {\n                        \"Name\": \"临泉县\"\n                    },\n                    {\n                        \"Name\": \"太和县\"\n                    },\n                    {\n                        \"Name\": \"阜南县\"\n                    },\n                    {\n                        \"Name\": \"颍上县\"\n                    },\n                    {\n                        \"Name\": \"界首市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"宿州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"埇桥区\"\n                    },\n                    {\n                        \"Name\": \"砀山县\"\n                    },\n                    {\n                        \"Name\": \"萧县\"\n                    },\n                    {\n                        \"Name\": \"灵璧县\"\n                    },\n                    {\n                        \"Name\": \"泗县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"巢湖\",\n                \"Region\": [\n                    {\n                        \"Name\": \"居巢区\"\n                    },\n                    {\n                        \"Name\": \"庐江县\"\n                    },\n                    {\n                        \"Name\": \"无为县\"\n                    },\n                    {\n                        \"Name\": \"含山县\"\n                    },\n                    {\n                        \"Name\": \"和县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"六安\",\n                \"Region\": [\n                    {\n                        \"Name\": \"金安区\"\n                    },\n                    {\n                        \"Name\": \"裕安区\"\n                    },\n                    {\n                        \"Name\": \"寿县\"\n                    },\n                    {\n                        \"Name\": \"霍邱县\"\n                    },\n                    {\n                        \"Name\": \"舒城县\"\n                    },\n                    {\n                        \"Name\": \"金寨县\"\n                    },\n                    {\n                        \"Name\": \"霍山县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"亳州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"谯城区\"\n                    },\n                    {\n                        \"Name\": \"涡阳县\"\n                    },\n                    {\n                        \"Name\": \"蒙城县\"\n                    },\n                    {\n                        \"Name\": \"利辛县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"池州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"贵池区\"\n                    },\n                    {\n                        \"Name\": \"东至县\"\n                    },\n                    {\n                        \"Name\": \"石台县\"\n                    },\n                    {\n                        \"Name\": \"青阳县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"宣城\",\n                \"Region\": [\n                    {\n                        \"Name\": \"宣州区\"\n                    },\n                    {\n                        \"Name\": \"郎溪县\"\n                    },\n                    {\n                        \"Name\": \"广德县\"\n                    },\n                    {\n                        \"Name\": \"泾县\"\n                    },\n                    {\n                        \"Name\": \"绩溪县\"\n                    },\n                    {\n                        \"Name\": \"旌德县\"\n                    },\n                    {\n                        \"Name\": \"宁国市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"芜湖\",\n                \"Region\": [\n                    {\n                        \"Name\": \"镜湖区\"\n                    },\n                    {\n                        \"Name\": \"弋江区\"\n                    },\n                    {\n                        \"Name\": \"鸠江区\"\n                    },\n                    {\n                        \"Name\": \"三山区\"\n                    },\n                    {\n                        \"Name\": \"芜湖县\"\n                    },\n                    {\n                        \"Name\": \"繁昌县\"\n                    },\n                    {\n                        \"Name\": \"南陵县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"蚌埠\",\n                \"Region\": [\n                    {\n                        \"Name\": \"龙子湖区\"\n                    },\n                    {\n                        \"Name\": \"蚌山区\"\n                    },\n                    {\n                        \"Name\": \"禹会区\"\n                    },\n                    {\n                        \"Name\": \"淮上区\"\n                    },\n                    {\n                        \"Name\": \"怀远县\"\n                    },\n                    {\n                        \"Name\": \"五河县\"\n                    },\n                    {\n                        \"Name\": \"固镇县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"淮南\",\n                \"Region\": [\n                    {\n                        \"Name\": \"大通区\"\n                    },\n                    {\n                        \"Name\": \"田家庵区\"\n                    },\n                    {\n                        \"Name\": \"谢家集区\"\n                    },\n                    {\n                        \"Name\": \"八公山区\"\n                    },\n                    {\n                        \"Name\": \"潘集区\"\n                    },\n                    {\n                        \"Name\": \"凤台县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"马鞍山\",\n                \"Region\": [\n                    {\n                        \"Name\": \"金家庄区\"\n                    },\n                    {\n                        \"Name\": \"花山区\"\n                    },\n                    {\n                        \"Name\": \"雨山区\"\n                    },\n                    {\n                        \"Name\": \"当涂县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"淮北\",\n                \"Region\": [\n                    {\n                        \"Name\": \"杜集区\"\n                    },\n                    {\n                        \"Name\": \"相山区\"\n                    },\n                    {\n                        \"Name\": \"烈山区\"\n                    },\n                    {\n                        \"Name\": \"濉溪县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"铜陵\",\n                \"Region\": [\n                    {\n                        \"Name\": \"铜官山区\"\n                    },\n                    {\n                        \"Name\": \"狮子山区\"\n                    },\n                    {\n                        \"Name\": \"郊区\"\n                    },\n                    {\n                        \"Name\": \"铜陵县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"安庆\",\n                \"Region\": [\n                    {\n                        \"Name\": \"迎江区\"\n                    },\n                    {\n                        \"Name\": \"大观区\"\n                    },\n                    {\n                        \"Name\": \"宜秀区\"\n                    },\n                    {\n                        \"Name\": \"怀宁县\"\n                    },\n                    {\n                        \"Name\": \"枞阳县\"\n                    },\n                    {\n                        \"Name\": \"潜山县\"\n                    },\n                    {\n                        \"Name\": \"太湖县\"\n                    },\n                    {\n                        \"Name\": \"宿松县\"\n                    },\n                    {\n                        \"Name\": \"望江县\"\n                    },\n                    {\n                        \"Name\": \"岳西县\"\n                    },\n                    {\n                        \"Name\": \"桐城市\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"福建\",\n        \"City\": [\n            {\n                \"Name\": \"福州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"鼓楼区\"\n                    },\n                    {\n                        \"Name\": \"台江区\"\n                    },\n                    {\n                        \"Name\": \"仓山区\"\n                    },\n                    {\n                        \"Name\": \"马尾区\"\n                    },\n                    {\n                        \"Name\": \"晋安区\"\n                    },\n                    {\n                        \"Name\": \"闽侯县\"\n                    },\n                    {\n                        \"Name\": \"连江县\"\n                    },\n                    {\n                        \"Name\": \"罗源县\"\n                    },\n                    {\n                        \"Name\": \"闽清县\"\n                    },\n                    {\n                        \"Name\": \"永泰县\"\n                    },\n                    {\n                        \"Name\": \"平潭县\"\n                    },\n                    {\n                        \"Name\": \"福清市\"\n                    },\n                    {\n                        \"Name\": \"长乐市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"厦门\",\n                \"Region\": [\n                    {\n                        \"Name\": \"思明区\"\n                    },\n                    {\n                        \"Name\": \"海沧区\"\n                    },\n                    {\n                        \"Name\": \"湖里区\"\n                    },\n                    {\n                        \"Name\": \"集美区\"\n                    },\n                    {\n                        \"Name\": \"同安区\"\n                    },\n                    {\n                        \"Name\": \"翔安区\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"山东\",\n        \"City\": [\n            {\n                \"Name\": \"济南\",\n                \"Region\": [\n                    {\n                        \"Name\": \"历下区\"\n                    },\n                    {\n                        \"Name\": \"市中区\"\n                    },\n                    {\n                        \"Name\": \"槐荫区\"\n                    },\n                    {\n                        \"Name\": \"天桥区\"\n                    },\n                    {\n                        \"Name\": \"历城区\"\n                    },\n                    {\n                        \"Name\": \"长清区\"\n                    },\n                    {\n                        \"Name\": \"平阴县\"\n                    },\n                    {\n                        \"Name\": \"济阳县\"\n                    },\n                    {\n                        \"Name\": \"商河县\"\n                    },\n                    {\n                        \"Name\": \"章丘市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"青岛\",\n                \"Region\": [\n                    {\n                        \"Name\": \"市南区\"\n                    },\n                    {\n                        \"Name\": \"市北区\"\n                    },\n                    {\n                        \"Name\": \"四方区\"\n                    },\n                    {\n                        \"Name\": \"黄岛区\"\n                    },\n                    {\n                        \"Name\": \"崂山区\"\n                    },\n                    {\n                        \"Name\": \"李沧区\"\n                    },\n                    {\n                        \"Name\": \"城阳区\"\n                    },\n                    {\n                        \"Name\": \"胶州市\"\n                    },\n                    {\n                        \"Name\": \"即墨市\"\n                    },\n                    {\n                        \"Name\": \"平度市\"\n                    },\n                    {\n                        \"Name\": \"胶南市\"\n                    },\n                    {\n                        \"Name\": \"莱西市\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"湖北\",\n        \"City\": [\n            {\n                \"Name\": \"武汉\",\n                \"Region\": [\n                    {\n                        \"Name\": \"江岸区\"\n                    },\n                    {\n                        \"Name\": \"江汉区\"\n                    },\n                    {\n                        \"Name\": \"硚口区\"\n                    },\n                    {\n                        \"Name\": \"汉阳区\"\n                    },\n                    {\n                        \"Name\": \"武昌区\"\n                    },\n                    {\n                        \"Name\": \"青山区\"\n                    },\n                    {\n                        \"Name\": \"洪山区\"\n                    },\n                    {\n                        \"Name\": \"东西湖区\"\n                    },\n                    {\n                        \"Name\": \"汉南区\"\n                    },\n                    {\n                        \"Name\": \"蔡甸区\"\n                    },\n                    {\n                        \"Name\": \"江夏区\"\n                    },\n                    {\n                        \"Name\": \"黄陂区\"\n                    },\n                    {\n                        \"Name\": \"新洲区\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"广东\",\n        \"City\": [\n            {\n                \"Name\": \"广州\",\n                \"Region\": [\n                    {\n                        \"Name\": \"荔湾区\"\n                    },\n                    {\n                        \"Name\": \"越秀区\"\n                    },\n                    {\n                        \"Name\": \"海珠区\"\n                    },\n                    {\n                        \"Name\": \"天河区\"\n                    },\n                    {\n                        \"Name\": \"白云区\"\n                    },\n                    {\n                        \"Name\": \"黄埔区\"\n                    },\n                    {\n                        \"Name\": \"番禺区\"\n                    },\n                    {\n                        \"Name\": \"花都区\"\n                    },\n                    {\n                        \"Name\": \"南沙区\"\n                    },\n                    {\n                        \"Name\": \"萝岗区\"\n                    },\n                    {\n                        \"Name\": \"增城市\"\n                    },\n                    {\n                        \"Name\": \"从化市\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"东莞\",\n                \"Region\": [{\n                    \"Name\": \"东莞市\"\n                }]\n            },\n            {\n                \"Name\": \"深圳\",\n                \"Region\": [\n                    {\n                        \"Name\": \"罗湖区\"\n                    },\n                    {\n                        \"Name\": \"福田区\"\n                    },\n                    {\n                        \"Name\": \"南山区\"\n                    },\n                    {\n                        \"Name\": \"宝安区\"\n                    },\n                    {\n                        \"Name\": \"龙岗区\"\n                    },\n                    {\n                        \"Name\": \"盐田区\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"珠海\",\n                \"Region\": [\n                    {\n                        \"Name\": \"香洲区\"\n                    },\n                    {\n                        \"Name\": \"斗门区\"\n                    },\n                    {\n                        \"Name\": \"金湾区\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"汕头\",\n                \"Region\": [\n                    {\n                        \"Name\": \"龙湖区\"\n                    },\n                    {\n                        \"Name\": \"金平区\"\n                    },\n                    {\n                        \"Name\": \"濠江区\"\n                    },\n                    {\n                        \"Name\": \"潮阳区\"\n                    },\n                    {\n                        \"Name\": \"潮南区\"\n                    },\n                    {\n                        \"Name\": \"澄海区\"\n                    },\n                    {\n                        \"Name\": \"南澳县\"\n                    }\n                ]\n            },\n            {\n                \"Name\": \"佛山\",\n                \"Region\": [\n                    {\n                        \"Name\": \"禅城区\"\n                    },\n                    {\n                        \"Name\": \"南海区\"\n                    },\n                    {\n                        \"Name\": \"顺德区\"\n                    },\n                    {\n                        \"Name\": \"三水区\"\n                    },\n                    {\n                        \"Name\": \"高明区\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        \"Name\": \"四川\",\n        \"City\": [\n            {\n                \"Name\": \"成都\",\n                \"Region\": [\n                    {\n                        \"Name\": \"锦江区\"\n                    },\n                    {\n                        \"Name\": \"青羊区\"\n                    },\n                    {\n                        \"Name\": \"金牛区\"\n                    },\n                    {\n                        \"Name\": \"武侯区\"\n                    },\n                    {\n                        \"Name\": \"成华区\"\n                    },\n                    {\n                        \"Name\": \"龙泉驿区\"\n                    },\n                    {\n                        \"Name\": \"青白江区\"\n                    },\n                    {\n                        \"Name\": \"新都区\"\n                    },\n                    {\n                        \"Name\": \"温江区\"\n                    },\n                    {\n                        \"Name\": \"金堂县\"\n                    },\n                    {\n                        \"Name\": \"双流县\"\n                    },\n                    {\n                        \"Name\": \"郫县\"\n                    },\n                    {\n                        \"Name\": \"大邑县\"\n                    },\n                    {\n                        \"Name\": \"蒲江县\"\n                    },\n                    {\n                        \"Name\": \"新津县\"\n                    },\n                    {\n                        \"Name\": \"都江堰市\"\n                    },\n                    {\n                        \"Name\": \"彭州市\"\n                    },\n                    {\n                        \"Name\": \"邛崃市\"\n                    },\n                    {\n                        \"Name\": \"崇州市\"\n                    }\n                ]\n            }\n        ]\n    }\n]);","angular.module('xw.services').factory('Alert', function () {\n    var codeMsg = {\n        1110: '手机号码或密码错误',\n        1111: '手机号码或密码错误',\n        1112: '该用户已存在',\n        1113: '手机号码或密码错误',\n\n        2110: '手机号码错误',\n\n        3110: '短信码错误',\n        3111: '短信码已过期',\n        3112: '无效的短信码',\n        3113: '错误的短信码类型',\n        3114: '短信码验证次数过多, 请重新接收短信码',\n        3115: '发送失败, 请稍后重试',\n        3116: '短信码发送次数达到当日最大次数',\n\n        4110: '库存不足',\n\n        5110: '尚未到充值码使用时间',\n        5111: '优惠码/优惠券已过期',\n        5112: '优惠码/优惠券已被使用',\n        5113: '超出优惠码/优惠券最大使用次数'\n    };\n\n    return {\n        show: function (code, def) {\n            var msg = codeMsg[code];\n            if (msg) alert(msg);\n            else if (def) alert(def);\n        },\n        message: function (code) {\n            return codeMsg[code] || '';\n        }\n    }\n})","angular.module('xw.services').provider('Debug', [\"Utils\", function (Utils) {\n    var that = this;\n    that.debugKey = 'debug';\n\n    this.$get = function () {\n        var isDebug = new RegExp('\\\\b' + that.debugKey + '\\\\b');\n        var fakeWarehouse = '';\n        var searches = Utils.searches(location.search);\n        isDebug = isDebug.test(location.search) || !!sessionStorage.getItem('debug');\n\n        if (isDebug && !sessionStorage.getItem('debug')) {\n            sessionStorage.setItem('debug', 'true');\n        }\n        if (isDebug) {\n            if ('fakewarehouse' in searches) {\n                fakeWarehouse = searches.fakewarehouse;\n            }\n        }\n\n        var ret = {\n            //默认根据查询参数中到是否出现debug参数来判断\n            isDebug: isDebug,\n            alert: function (val) {\n                if (this.isDebug) {\n                    console.log(val); // todo:怎么判断log是否有效?如果有效,似乎就没有多大必要调用alert了.\n                    val = Object.prototype.toString.call(val) == \"[object Object]\"\n                        ? JSON.stringify(val) : val;\n                    alert(val);\n                }\n            },\n            assert: function (express, sval) {\n                if (this.isDebug) {\n                    !express && alert(sval);\n                }\n            },\n            promiseErrFn: function (msg) {\n                return function(res) {\n                    ret.alert(msg);\n                    ret.alert(res);\n                }\n            },\n            fakeWarehouse: fakeWarehouse\n        };\n        \n        return ret\n    }\n}]);","angular.module('xw.services').factory('Map', [\"$http\", \"Debug\", function ($http, Debug) {\n    // 如果有必要修改则需要改成provider\n    var topDistance = {\n        xinweioffice: 6000,\n        caohejing1: 1560\n    };\n\n    var map = {\n        bentoNoReach: 999999,\n\n        topDistance: {\n            xinweioffice: 6000,\n            caohejing1: 1560\n        },\n\n        suggestion: function (query, region) {\n            return $http.get('/mobile/placesuggestion?query=' + query + '&region=' + region)\n        },\n\n        // 坐标转化\n        // https://github.com/JackZhouCn/JZLocationConverter/\n        gcj02ToBd09: function (location) {\n            var y = location.lat;\n            var x = location.lng;\n            var z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * Math.PI);\n            var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * Math.PI);\n    \n            return {\n                lng: z * Math.cos(theta) + 0.0065,\n                lat: z * Math.sin(theta) + 0.006\n            }\n        },\n\n        // 在调用百度suggestion api后会用到\n        bd09ToGcj02: function (location) {\n            var y = location.lat - 0.006;\n            var x = location.lng - 0.0065;\n            var z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * Math.PI);\n            var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * Math.PI);\n    \n            return {\n                lng: z * Math.cos(theta),\n                lat: z * Math.sin(theta)\n            }\n        },\n\n        //根据坐标计算直线距离\n        //https://github.com/googollee/eviltransform\n        lineDistance: function (latA, lngA, latB, lngB) {\n            var earthR = 6371000;\n            var x = Math.cos(latA * Math.PI / 180) * Math.cos(latB * Math.PI / 180) * Math.cos((lngA - lngB) * Math.PI / 180);\n            var y = Math.sin(latA * Math.PI / 180) * Math.sin(latB * Math.PI / 180);\n            var s = x + y;\n            if (s > 1) {\n                s = 1;\n            }\n            if (s < -1) {\n                s = -1;\n            }\n            var alpha = Math.acos(s);\n            return alpha * earthR;\n        },\n\n        lineDistance2CHJ: function (lat, lng) {\n            var CHJ = this.warehouseCoords.caohejing1;\n            return this.lineDistance(lat, lng, CHJ.lat, CHJ.lng)\n        },\n\n        fixZero: function (d, lat, lng) {\n            if (d !== 0) return d;\n            var lineD = this.lineDistance(lat, lng, 31.189426, 121.460625);\n            return lineD > 1500 ? 999999 : d;\n        },\n\n        /**\n         * 对百度地图routematrix api的后端包装,此处原样返回百度的数据\n         * @param lat gcj02坐标 | [sval, obj, ..]\n         * @param lng\n         * @param warehouse\n         * @returns {HttpPromise}\n         */\n        walkingDistance: function (lat, lng, warehouse) {\n            var args;\n            warehouse = warehouse || '';\n            if (Array.isArray(arguments[0])) {\n                args = arguments[0];\n                warehouse = lng;\n            } else {\n                args = [{lat: lat, lng: lng}];\n            }\n\n            var sval = '';\n            args.forEach(function (arg, i) {\n                if (i >= 5) return; //百度限制\n                var prefix = i == 0 ? '' : '|';\n                if (typeof arg == 'string') {\n                    sval += prefix + arg;\n                } else {\n                    sval += prefix + arg.lat + ',' + arg.lng;\n                }\n            });\n\n            return $http.get('/mobile/distance?destinations=' +\n                encodeURIComponent(sval) + '&warehouse=' + warehouse)\n            .then(function (res) {\n                    var results = res.data.result.elements;\n                    var ret = [];\n                    var len = results.length / 2;\n                    var pair;\n                    for (var i = 0; i < len; i++) {\n                        results[i].warehouse = 'xinweioffice';\n                        results[len + i].warehouse = 'caohejing1';\n                        pair = [results[i], results[len + i]];\n                        pair = angular.sort(pair, function (a, b) {\n                            return (a.distance.value - topDistance.xinweioffice) -\n                                (b.distance.value - topDistance.caohejing1)\n                        });\n                        ret.push(pair);\n                    }\n                    return ret;\n                })\n            .catch(function () {\n                    console.log('get distance error');\n                    return []\n                })\n        },\n\n        /**\n         * 计算距离仓库的距离\n         * @param lat gcj02\n         * @param lng gcj02\n         * @param warehouse - 'CHJ'\n         * @returns {*|Promise.<T>}\n         */\n        distance: function (lat, lng, warehouse) {\n            return this.walkingDistance(lat, lng, warehouse).then(function (res) {\n                var d = res[0][0].distance.value;\n                d = map.fixZero(d, lat, lng);\n                var top = topDistance[res[0][0].warehouse];\n                return {\n                    distance: d,\n                    // 百度有时候返回的是null, 此时就当作1000公里\n                    isInRange: (d === null ? 999999 : d) <= top,\n                    warehouse: res[0][0].warehouse\n                }\n            }).catch(function (res) {\n                Debug.alert('获取步行距离失败');\n                Debug.alert(res);\n            })\n        },\n\n        distances: function (dests, warehouse) {\n            dests = Array.isArray(dests) ? dests : [dests];\n            return this.walkingDistance(dests, warehouse).then(function (res) {\n                return res.map(function (el, i) {\n                    var d = map.fixZero(el[0].distance.value, dests[i].lat, dests[i].lng);\n                    var top = topDistance[el[0].warehouse];\n                    return {\n                        distance: d,\n                        isInRange: (d === null ? 999999 : d) <= top,\n                        warehouse: el[0].warehouse\n                    }\n                })\n            })\n        },\n\n        nearestWarehouse: function (lat, lng) {\n            var that = this;\n            var topDistance2HQ = topDistance['xinweioffice'];\n            var topDistance2CHJ = topDistance['caohejing1'];\n            var warehouses = angular.sort(['xinweioffice', 'caohejing1'].map(function (name) {\n                var warehouse = that.warehouseCoords[name];\n                return {\n                    name: name,\n                    distance: that.lineDistance(lat, lng, warehouse.lat, warehouse.lng)\n                }\n            }), function (a, b) {\n                return (a.distance - topDistance2HQ + 1100) - (b.distance - topDistance2CHJ)\n            });\n\n            if (Debug.fakeWarehouse) {return Debug.fakeWarehouse}\n            return warehouses[0].name;\n\n        },\n\n        warehouseCoords: {\n            xinweioffice: {\n                lat: 31.189426,\n                lng: 121.460625\n            },\n            caohejing1: {\n                lat: 31.169250,\n                lng: 121.398949\n            }\n        }\n    };\n\n    return map;\n}]);","angular.module('xw.services').factory('ScopeDecorator', [\"$location\", function ($location) {\n    return {\n        common: function (scope) {\n            if (!scope) return;\n            scope.back = function () {\n                if (history.length > 1) history.back();\n                else location.href = '/mobile/'\n            }\n        },\n        nav: function (scope) {\n            if (!scope) return;\n            scope.$on('$locationChangeStart', function () {\n                scope.path = $location.path();\n            });\n        }\n    }\n}]);","angular.module('xw.services').factory('Utils', [\"$localStorage\", function ($localStorage) {\n    return {\n        // todo: base64编码后的字符包括大小写字母各26各,以及数字,以及 + / = 这3个字符\n        // 而 +(这个...) 和 / 在url中会被转义,因此需要再做替换,这里替换 + 为 - , / 替换为 _\n        utf2b64: function (str) {\n            return btoa(unescape(encodeURIComponent(str))).replace(/\\+/g, '-').replace(/\\//g, '_');\n        },\n        b642utf: function (str) {\n            return decodeURIComponent(escape(window.atob(str.replace(/-/g, '+').replace(/_/g, '/'))));\n        },\n\n        // 两个购物车item是否是同一个,购物车item结构为:{dish:dish, number:, subDish:[]}\n        isSameItemInCart: function (item1, item2) {\n            return item1.dish._id == item2.dish._id && //主dish是否相同\n                item1.subDish.every(function (a) { //子dish是否全部相同\n                    return item2.subDish.some(function (b) {\n                        return a.dish._id == b.dish._id\n                    })\n                }) && item1.subDish.length == item2.subDish.length;\n        },\n\n        // 合并本地购物车和线上购物车, 将数据全部合并到本地购物车.\n        // local dish的数量(非dish.number)只会增加不会减少\n        mergeCarts: function (local, server) {\n            if (!local || !local.length) return server;\n            var that = this;\n            for (var i = 0; i < server.length; i++) {\n                var notInLocal = local.every(function (lDish) {\n                    return !that.isSameItemInCart(lDish, server[i])\n                });\n                if (notInLocal)\n                   local.push(server[i]);\n            }\n            return local;\n        },\n\n        /**\n         * 从/api/dishes获取到dish列表中抽取上线且有货的子属性菜品\n         * @param dishList [{_id:., outOfStock: ., ..}]\n         * @param type - 'main', or 'preference'\n         * @returns [24位id, ..] 最小化localStorage的存储成本.(也许取末几位就可以)\n         */\n        getStockId: function (dishList, type) {\n            var idStockMap = {};\n            if (type == 'preference') {\n                dishList.forEach(function (dish) {\n                    dish.preferences.forEach(function (p) {\n                        p.foodMaterial.forEach(function (f) {\n                            if (!idStockMap[f.dish._id] && f.dish.isPublished) {\n                                idStockMap[f.dish._id] = true;\n                            }\n                        })\n                    })\n                });\n            } else {\n                dishList.forEach(function (dish) {\n                    if (!idStockMap[dish._id] && !dish.outOfStock) {\n                        idStockMap[dish._id] = true;\n                    }\n                })\n            }\n\n            return Object.keys(idStockMap);\n        },\n\n        /**\n         * localStorage实在是太大了,去掉多余的信息,只保留必要的信息.\n         */\n        cleanLocalStorage: function () {\n            var remain = ['localBag', 'promotion', 'access_token'];\n            Object.keys($localStorage).forEach(function (key) {\n                if (remain.indexOf(key) == -1 && key[0] != '$') {\n                    delete $localStorage[key];\n                }\n            })\n        },\n\n        /**\n         * 接收'?a=1&b=&c'这样的查询字符串,输出:{a:1, b:'', c: ''}\n         * @param search - 如果没有则使用location.search\n         * @returns {*}\n         */\n        searches: function (search) {\n            search = search || location.search;\n            return search.slice(1).split('&').reduce(function (obj, cur) {\n                if (cur) {\n                    cur = cur.split('=');\n                    obj[cur[0]] = decodeURIComponent(cur[1] || '');\n                }\n                return obj;\n            }, {});\n        }\n\n\n    }\n}]);","angular.module('xw.weixin').factory('Weixin',[\"$http\", \"Debug\", function ($http, Debug) {\n\n    var defaults = {\n        //weixin js config\n        wx: {\n            appId: 'wx37a1323e488cef84',\n            jsApiList: ['getLocation', 'onMenuShareTimeline', 'onMenuShareAppMessage']\n        },\n\n        // xinwei location, gcj02\n        location: {\n            longitude: 121.460625,\n            latitude: 31.189426\n        },\n\n        ak: 'xnKgWtGYXf4gkLgreox7xpjI',\n\n        oauthUrl: '/api/orders/payment/weixinpay/oauthcode?orderid='\n    };\n\n    return {\n        isWeixin: /MicroMessenger/i.test(navigator.userAgent),\n\n        oauthUrl: defaults.oauthUrl,\n\n        readyState: false,\n\n        // 微信的事后ready似乎不好用，连个详细的文档都没有，还是自己实现靠谱。\n        ready: function (cb) {\n            if (this.readyState) {\n                cb();\n            } else this.ready.cb = cb;\n        },\n        /**\n         * set jsapi config\n         * @param setting\n         */\n        config: function (setting) {\n            var that = this;\n            var _setting = angular.copy(defaults.wx);\n            _setting.timestamp = setting.timestamp;\n            _setting.nonceStr = setting.nonceStr; // todo: be careful to different backend returned data.\n            _setting.signature = setting.signature;\n\n            wx.config(_setting);\n\n            wx.ready(function() {\n                that.ready.cb && that.ready.cb();\n                that.readyState = true;\n            });\n        },\n        /**\n         * @param success - success callback with {lat: . lng: .} arguemnt\n         * @param fail - fail callback with unknown arguemnt\n         */\n        getLocation: function(success, fail) {\n            var setting = {type: 'gcj02'};\n            success && (setting.success = success);\n            fail && (setting.fail = fail);\n            wx.getLocation(setting);\n        },\n\n        /**\n         * 同微信分享朋友圈接口http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E8.8E.B7.E5.8F.96.E2.80.9C.E5.88.86.E4.BA.AB.E5.88.B0.E6.9C.8B.E5.8F.8B.E5.9C.88.E2.80.9D.E6.8C.89.E9.92.AE.E7.82.B9.E5.87.BB.E7.8A.B6.E6.80.81.E5.8F.8A.E8.87.AA.E5.AE.9A.E4.B9.89.E5.88.86.E4.BA.AB.E5.86.85.E5.AE.B9.E6.8E.A5.E5.8F.A3\n         * @param settings\n         */\n        shareTimeline: function (settings) {\n            wx.onMenuShareTimeline(settings);\n        },\n\n        shareAppMessage: function (settings) {\n            wx.onMenuShareAppMessage(settings);\n        },\n\n        showOptionMenu: function () {\n            wx.showOptionMenu();\n        },\n\n        hideOptionMenu: function () {\n            wx.hideOptionMenu();\n        },\n\n        /**\n         * get location with baidu api\n         * @param lat - gcj02\n         * @param lng\n         * @return promise will resolved with $http res.\n         */\n        getLocationName: function (lat, lng) {\n            var mapUrl = 'http://api.map.baidu.com/geocoder/v2/?output=json&pois=1&coordtype=gcj02ll&callback=JSON_CALLBACK'\n            return $http.jsonp(mapUrl, {\n                params: {\n                    ak: defaults.ak,\n                    location: lat + ',' + lng\n                }\n            })\n        },\n        /**\n         * 获取jsconfig 参数\n         * @param url\n         * @returns {HttpPromise}\n         */\n        getJsconfig: function () {\n            return $http.post('/api/orders/payment/weixinpay/config', {\n                url: location.href.substr(0, location.href.length - location.hash.length)\n            });\n        }\n    }\n}]);","/**\n * 图片自适应为屏幕宽度\n */\nangular.module('xw.filters').filter('adapt', function () {\n    var width = Math.floor(document.body.offsetWidth * window.devicePixelRatio);\n    var height = Math.floor(width * 2 / 3);\n    var prefix = '?imageView2/1/w/';\n    var query = prefix + width + '/h/' + height;\n    return function (src, ratio) {\n        return src + (ratio ?\n                prefix + width + '/h/' + Math.floor(width * ratio) :\n                query)\n    }\n});\n\n/**\n *  将类似于1/2的文本显示为¹⁄₂\n */\nangular.module('xw.filters').filter('fraction', function () {\n    var superscripts = ['⁰', '¹', '²', '³', '⁴', '⁵', '⁶', '⁷', '⁸', '⁹'];\n    var subscripts = ['\\u2080', '\\u2081', '\\u2082', '\\u2083', '\\u2084',\n        '\\u2085', '\\u2086', '\\u2087', '\\u2088', '\\u2089'];\n\n    function i2s(sval, scripts) {\n        var ret = '';\n        for (var i = 0; i < sval.length; i++) {\n            ret += scripts[sval[i]]\n        }\n        return ret;\n    }\n\n    return function (str) {\n        return str.replace(/(\\d+)\\/(\\d+)/g, function (_, sup, sub) {\n            return i2s(sup, superscripts) + '⁄' + i2s(sub, subscripts) + ' ';\n        })\n    }\n});\n\n/**\n * 将服务器传回来的dish结构的数据转换为post dish更新购物车时需要的格式(不在模板中使用)\n */\nangular.module('xw.filters').filter('postDish', function () {\n    return function (dish) {\n        return {\n            dish: dish.dish._id,\n            number: dish.number,\n            subDish: !dish.subDish ? [] : dish.subDish.map(function (el) {\n                return {\n                    dish: el.dish._id,\n                    number: el.number\n                }\n            })\n        }\n    }\n});\n\n/**\n * 使mobile变成 133 3333 3333这种形式, 有更好的可读性\n */\nangular.module('xw.filters').filter('beautifyMobile', function () {\n    return function (mobile) {\n        if (!/^\\d{11}$/.test(mobile)) return mobile;\n        return mobile.replace(/^(\\d{3})(\\d{4})(\\d{4})$/,\n            function (_, m1, m2, m3) {\n                return m1 + ' ' + m2 + ' ' + m3;\n            })\n    }\n});\n\n/**\n * 使title变成 '/土豆泥' 这样的形式\n */\nangular.module('xw.filters').filter('subDishTitle', function () {\n    return function (item) {\n        var last = item.subDish.length;\n        if (!last) return '';\n        return '(' + item.subDish.reduce(function (title, cur, i) {\n            return title + cur.dish.title.zh + (i == last - 1 ? '' : '/')\n        }, '') + ')';\n    }\n});\n\n/**\n * 将查询返回的派送时间转换成下单所需要的形式[NOT FOR HTML]\n * time为{hour: ''}, 当type为eat时,\n * time为{day:{day:''}, time: {name: ''}}, 当type为cook时,\n * time为{eat: {hour}, cook:{day,time}}, 当type为all时.\n */\nangular.module('xw.filters').filter('orderTime', function () {\n    return function filter(time, type) {\n        var ret;\n        if (type == 'eat') {\n            return {\n                deliveryDateEat: time.hour.substr(0, 10),\n                deliveryTimeEat: time.hour.substr(11, 5)\n            }\n        } else if (type == 'cook') {\n            ret = {deliveryDateCook: time.day};\n            ret.deliveryTimeCook = time.segment ? time.segment.name+':00' : '12:00';\n            return ret;\n        } else if (type == 'all') {\n            ret = {};\n            if (time.eat) ret = filter(time.eat, 'eat');\n            if (time.cook) angular.extend(ret, filter(time.cook, 'cook'));\n            return ret;\n        }\n    }\n});\n\nangular.module('xw.filters').filter('cookTimeUnion', function () {\n    return function (times) {\n        if (!times || !times.length) {\n            return times\n        }\n        var hasSegment = !!times[0].segment;\n        return times.reduce(function (list, cur) {\n            if (hasSegment) {\n                cur.segment.forEach(function (item) {\n                    list.push({\n                        day: cur.day,\n                        segment: item\n                    })\n                })\n            } else {\n                list.push({day: cur.day})\n            }\n            return list;\n        }, [])\n    }\n})\n\n/**\n * 有多种不同的dishList类型, 有些是从后端获得的, 有些是作为更新购物车post回去的,\n * 有些是前端为了展示方便而构造的, 此处对其做统一转换, 免去放在controller中的苦恼.\n * dishes: 待转换待原始数据. tType:target type. sType: source type\n * type: 'displayCart',用来展示待购物车的dish list\n *       'order', 用来下单的list\n *\n * examples:\n * displayCart, 为 {cookList: [], eatList: []}, 其中[]为如下形式\n * [{\n *   dish: Dish, // {_id: '', title: {zh:'', en: ''}, ...}\n *   subDish: [{dish},.]\n *   number\n * }, ..]\n *\n * order, 为 {dishList: []}, 其中[]为如下形式\n * [{\n *   dish: _id,\n *   number: number,\n *   subDish: [..]\n * }, ..]\n */\nangular.module('xw.filters').filter('dishes', function () {\n    return function (dishes, tType, sType) {\n        var ret;\n        // 将displayCart 转换为 order 类型的dishList\n        if (tType == 'order' && sType == 'displayCart') {\n            ret = [];\n            Object.keys(dishes).forEach(function (key) {\n                dishes[key].forEach(function (el) {\n                    ret.push({\n                        dish: el.dish._id,\n                        number: el.number,\n                        subDish: el.subDish.map(function (sDish) {\n                            return {\n                                dish: sDish.dish._id,\n                                number: sDish.number\n                            }\n                        })\n                    });\n                });\n            });\n\n            return {dishList: ret}\n        } else return dishes\n    }\n});\n\n/**\n * 优惠券下单数据转换.要求传入当数据格式为: {code: '优惠码字符串', card: {优惠券对象}}\n */\nangular.module('xw.filters').filter('coupon', function () {\n    return function (coupon) {\n        var ret = {};\n        if (coupon.code) {\n            ret.promotionCode = coupon.code;\n            if (coupon.code.length == 8) {\n                // tcl 优惠券特殊处理. 我们的优惠券要求必须是10位\n                ret.promotionCode = 'zz' + ret.promotionCode;\n            }\n        }\n        if (coupon.card) {\n            ret.coupon = coupon.card._id;\n        }\n        return ret;\n    }\n});\n\n/**\n * 便当配送时间选项补充上请选择时间\n */\nangular.module('xw.filters').filter('eatTimeOptions', function () {\n    return function (times) {\n        if (!times || !times.length) return times;\n        times.unshift({hour: '请选择配送时间'});\n        return times;\n    }\n});\n\nangular.module('xw.filters').filter('eatTimeDisplay', function () {\n    return function (time) {\n        return time.hour\n    }\n});\n\nangular.module('xw.filters').filter('cookTimeOptions', function () {\n    return function (times) {\n        if (!times || !times.length) return times;\n        times.unshift({day: '请选择配送时间'});\n        return times\n    }\n});\n\nangular.module('xw.filters').filter('cookTimeDisplay', function () {\n    return function (time) {\n        return time.day == '请选择配送时间' || time.segment ?\n            time.day : time.day + ' 送达'\n    }\n});\n\n// 返回购物车item的价格\nangular.module('xw.filters').filter('dishPrice', function () {\n    return function (item, total) {\n        var price = item.dish.priceOriginal;\n        if (item.subDish) {\n            for (var i = 0, len = item.subDish.length; i < len; i++) {\n                price += item.subDish[i].dish.priceOriginal;\n            }\n        }\n        return price * (total ? item.number : 1);\n    }\n})\n\n","angular.module(\"xw.directives\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"add-dish-bar.html\",\"<div class=\\\"selection-cover\\\" ng-cloak ng-if=\\\"dish\\\" ng-click=\\\"hide()\\\"></div><div class=\\\"selections-container\\\" ng-if=\\\"dish\\\" ng-cloak><div class=\\\"block\\\"><h4 class=\\\"text-center\\\">{{dish.title.zh}}<span ng-click=\\\"hide()\\\" class=\\\"button close-button\\\"></span></h4><ul class=\\\"properties\\\" ng-if=\\\"dish.preferences.length\\\"><li ng-repeat=\\\"property in dish.preferences track by property._id\\\"><h5>{{property.name.zh}}</h5><ul class=\\\"selections\\\"><li ng-repeat=\\\"selection in property.foodMaterial track by selection._id\\\" ng-click=\\\"(!selection.dish.outOfStock && selection.dish.isPublished) && (dish.curSelection[property.name.zh] = selection.dish)\\\" ng-class=\\\"{\\'no-stock\\': (selection.dish.outOfStock || !selection.dish.isPublished), selected: dish.curSelection[property.name.zh] == selection.dish}\\\">{{selection.dish.title.zh}}</li></ul></li></ul><div class=\\\"counter-wrapper\\\"><i>份数</i><div class=\\\"counter text-center\\\"><span ng-click=\\\"dish.count>0 && (dish.count=dish.count-1)\\\" class=\\\"minus\\\">-</span> <span class=\\\"number\\\">{{dish.count}}</span> <span ng-click=\\\"dish.count=dish.count+1\\\" class=\\\"add\\\">+</span></div></div><div class=\\\"add-to-cart-button text-center\\\" ng-class=\\\"{invalid: dish.count == 0}\\\" ng-click=\\\"dish.count>0 && addToCart(dish)\\\">加入购物袋</div></div></div>\");\n$templateCache.put(\"confirm.html\",\"<div class=\\\"xw-confirm\\\" ng-click><modal close=\\\"close\\\" show=\\\"showModal\\\" pre-close=\\\"preClose\\\"><div class=\\\"text\\\" ng-transclude></div><div class=\\\"button-group\\\"><span ng-click=\\\"cancel()\\\">取消</span> <span ng-click=\\\"confirm()\\\">确定</span></div></modal></div>\");\n$templateCache.put(\"geetest-sms-button.html\",\"<div class=\\\"geetest-sms-button-group\\\"><div id=\\\"geetestContainer\\\" ng-show=\\\"state==2\\\"></div><span class=\\\"geetest-sms-button\\\" ng-if=\\\"state <= 1\\\" ng-class=\\\"{invalid: state === 0}\\\" ng-click=\\\"state == 1 && showGeetest()\\\">获取验证码</span> <span class=\\\"geetest-sms-button invalid\\\" ng-if=\\\"state == 3\\\">发送成功 {{remains}}</span> <span ng-click=\\\"state == 5 && showGeetest()\\\" class=\\\"geetest-sms-button\\\" ng-class=\\\"{invalid: state == 4}\\\" ng-if=\\\"state > 3\\\">重新获取</span></div>\");\n$templateCache.put(\"modal.html\",\"<div class=\\\"xw-modal-container\\\" ng-show=\\\"css.show\\\"><div class=\\\"xw-modal-backdrop\\\" ng-click=\\\"close()\\\"></div><div class=\\\"xw-modal-content\\\" ng-transclude></div></div>\");\n$templateCache.put(\"shopping-progress-bar.html\",\"<div class=\\\"shopping-progress-bar\\\"><div class=\\\"states\\\"><span ng-class=\\\"{cur: state == \\'state1\\'}\\\" class=\\\"state1\\\">筛选购物袋</span> <span ng-class=\\\"{cur: state == \\'state2\\'}\\\" class=\\\"state2\\\">确认送货地址</span> <span ng-class=\\\"{cur: state == \\'state3\\'}\\\" class=\\\"state3\\\">支付</span></div><div class=\\\"state-bar-container\\\"><div class=\\\"indicator\\\" ng-class=\\\"state\\\"></div></div></div>\");\n$templateCache.put(\"sms-button.html\",\"<div class=\\\"sms-button-group\\\"><span class=\\\"sms-button\\\" ng-if=\\\"state <= 1\\\" ng-class=\\\"{invalid: state === 0}\\\" ng-click=\\\"state == 1 && getSmsCode()\\\">获取验证码</span> <span class=\\\"sms-button invalid\\\" ng-if=\\\"state == 2\\\">{{remains}}秒后重新获取</span> <span ng-click=\\\"state == 4 && getSmsCode()\\\" class=\\\"sms-button\\\" ng-class=\\\"{invalid: state == 3}\\\" ng-if=\\\"state > 2\\\">重新获取</span></div>\");}]);","angular.module('xw.models').factory('Dishes', [\"$http\", function ($http) {\n\n    return {\n        getList: function (warehouse, cookingType) {\n            warehouse = warehouse || '';\n            cookingType = cookingType || '';\n            return $http.get(\n                '/api/dishes?showForWarehouse=' + warehouse +\n                '&cookingType=' + cookingType\n            );\n        },\n        like: function (id) {\n            return $http.put('/api/dishes/' + id + '/like');\n        },\n        getOne: function (id) {\n            return $http.get('/api/dishes/' + id);\n        }\n    }\n}]);\n\nangular.module('xw.models').factory('Orders', [\"$http\", function ($http) {\n    return {\n        postOrder: function (data) {\n            return $http.post('/api/orders', data);\n        },\n        deliveryTime: function (data) {\n            return $http.post('/api/orders/delivery/time', data)\n        },\n        deliveryEatTime: function (data) {\n            return $http.post('/api/orders/delivery/time/eat/warehouse', data)\n        },\n        getOrder: function (orderId) {\n            return $http.get('/api/orders/' + orderId);\n        },\n        updateOrder: function (id, data) {\n            return $http.put('/api/orders/' + id, data)\n        },\n        getList: function () {\n            return $http.get('/api/orders');\n        },\n        getUnifiedOrder: function (data) {\n            return $http.post('/api/orders/payment/weixinpay/unifiedorder', data);\n        }\n    }\n}]);\n\nangular.module('xw.models').factory('User', [\"$http\", \"$localStorage\", function ($http, $localStorage) {\n    // 这些变量作为更新购物车用\n    // 最近一次添加至cart的时间\n    var cartDate = Date.now();\n    var timeSpan = 500;\n    var timer = null;\n\n    return {\n        login: function (username, password, couponcode) {\n            var args = {\n                username: username,\n                password: password,\n                grant_type: 'password'\n            };\n            if (couponcode) args.couponcode = couponcode;\n            return $http.post('/api/user/token', args).then(function (res) {\n                if (res.data && res.data.access_token) {\n                    $localStorage.access_token = res.data.access_token;\n                }\n\n                return res;\n            })\n        },\n        signup: function (mobile, pwd, code, couponcode) {\n            var opts = {\n                mobile: mobile,\n                pwd: pwd,\n                code: code\n            };\n            if (couponcode) {\n                opts.couponcode = couponcode;\n            }\n            return $http.post('/api/user/signup', opts).then(function (res) {\n                if (res.data && res.data.access_token) {\n                    $localStorage.access_token = res.data.access_token;\n                }\n\n                return res;\n            })\n        },\n        getSmsCode: function (data) {\n            return $http.post('/api/user/sms', data)\n        },\n        logout: function () {\n            return $http.post('/api/user/logout', {\n                token_type_hint: \"access_token\",\n                token: $localStorage.access_token\n            })\n        },\n        getUserInfo: function () {\n            return $http.get('/api/user');\n        },\n        updateUser: function (data) {\n            return $http.put('/api/user', data)\n        },\n        resetPwd: function (mobile, pwd, code) {\n            return $http.post('/api/user/resetpassword', {\n                mobile: mobile,\n                pwd: pwd,\n                code: code\n            });\n        },\n        postCart: function (cart) {\n            var now = Date.now();\n            if (now - cartDate > timeSpan) {\n                clearTimeout(timer);\n                return $http.post('/api/user/shoppingcart', {shoppingCart: cart});\n            } else {\n                clearTimeout(timer);\n                timer = setTimeout(this.postCart.bind(this, cart), timeSpan + 100)\n            }\n            cartDate = now;\n            return {'catch': angular.noop}\n        },\n        applyInvitationCode: function (code) {\n            return $http.get('/api/user/coupon/invitation/' + code)\n        },\n        invitedFriends: function () {\n            return $http.get('/api/user/coupon/friends');\n        },\n\n        getWeixinUserInfo: function (id) {\n            return $http.get('/api/user/weixin/userinfo?userId=' + id);\n        }\n\n    }\n}]);\n\nangular.module('xw.models').factory('Coupon', [\"$http\", function ($http) {\n    return {\n        getCouponInfo: function (code) {\n            return $http.get('/api/coupons/code/' + code);\n        },\n        exchangeCouponCode: function (code) {\n            return $http.get('/api/user/coupon/code/' + code);\n        }\n    }\n}]);\n\nangular.module('xw.models').factory('Alipay', [\"$http\", function ($http) {\n    return {\n        notify: function (id, isCharge) {\n            var url = isCharge ? '/api/orders/payment/alipay/notify/account'\n                : '/api/orders/payment/alipay/mobile';\n            return $http.post(url, {out_trade_no: id})\n        }\n    }\n}]);\n\nangular.module('xw.models').factory('Balance', [\"$http\", \"Debug\", function ($http, Debug) {\n    return {\n        balance: function () {\n            return $http.get('/api/user/account')\n        },\n        chargeByCode: function (code) {\n            return $http.post('/api/user/account/chargecode', {accountChargeCode: code});\n        },\n        chargeOnline: function (data) {\n            return $http.post('/api/user/account/details', data);\n        },\n        balanceRecords: function () {\n            return $http.get('/api/user/account/details?skip=0&limit=200')\n                .catch(Debug.promiseErrFn('获取余额记录失败'))\n        }\n    }\n}])","//generated by gulp errcode\nangular.module(\"xw.config\").constant(\"errCode\", function(){\nreturn {\n    user: {\n        // todo: 第二第三位的1 是什么意思, sms独立出来??\n        wrongMobile   : 1110,\n        wrongPassword : 1111,\n        alreadyExist  : 1112,\n        notFound      : 1113,\n\n        addressIdWrong : 1210,\n        addressNotFound : 1212,\n\n        addressLatitudeWrong  : 1220,\n        addressLongitudeWrong : 1221,\n        addressCoordTypeWrong : 1222,\n\n        addressProvinceWrong     : 1225,\n        addressCityWrong         : 1226,\n        addressDistrictWrong     : 1227,\n        addressStreetWrong       : 1228,\n        addressStreetNumberWrong : 1229,\n        addressAddressWrong      : 1230,\n\n        addressContactPersonWrong : 1235,\n        addressMobileWrong        : 1236,\n        addressSortOrderWrong     : 1237\n\n    },\n    order: {\n        notFound: 2010,\n\n        orderIdWrong: 2011,\n        warehouseIdWrong: 2012,\n\n        cookingTypeWrong: 2110,\n        clientFromWrong: 2112,\n\n        creditWrong: 2115,\n        freightWrong: 2117,\n        paymentWrong: 2119,\n        paymentUsedCashWrong: 2120,\n\n        deliveryDateCookWrong: 2122,\n        deliveryTimeCookWrong: 2124,\n        deliveryDateEatWrong: 2126,\n        deliveryTimeEatWrong: 2128,\n\n        dishListArrayWrong: 2130,\n        dishListDishNumberWrong: 2132,\n        dishListDishIdWrong: 2134,\n        dishListSubDishArrayWrong: 2136,\n        dishListSubDishNumberWrong: 2138,\n        dishListSubDishIdWrong: 2139,\n\n\n        addressLatitudeWrong  : 2140,\n        addressLongitudeWrong : 2142,\n\n        addressProvinceWrong     : 2144,\n        addressCityWrong         : 2145,\n        addressDistrictWrong     : 2146,\n        addressStreetWrong       : 2147,\n        addressStreetNumberWrong : 2148,\n        addressAddressWrong      : 2149,\n\n        addressContactPersonWrong : 2152,\n        addressMobileWrong        : 2154,\n\n        addressIdWrong : 2160,\n\n        userCommentWrong: 2180,\n\n        dishIdInvalid: 2190,\n        notOnlyDrink: 2192,\n        notOverTenDrinks: 2194\n\n\n\n\n    },\n    sms: {\n        wrongCode: 3110,\n        expired: 3111,\n        invalidCode: 3112,\n        wrongType: 3113,\n        tooManyTries: 3114,\n        sendFailed: 3115,\n        reachSendLimitation: 3116\n    },\n    dish: {\n        outOfStock: 4110\n    },\n    coupon: {\n\n        notStart: 5110,\n        expired: 5111,\n        used: 5112,\n        outOfCount: 5113,\n        notFound      : 5120,\n\n        couponIdWrong : 5210,\n        promotionCodeWrong : 5212\n    },\n\n    announcement: {\n        announcementIdWrong : 8110,\n        notFound: 8112\n    }\n};\n});\nangular.module('xw.config').factory('commonInterceptor', ['$localStorage', '$q', function($localStorage, $q) {\n    var noRedirectPath = [/^\\/mobile\\/$/, /^\\/mobile\\/login/, /^\\/mobile\\/cook/, /^\\/mobile\\/cart/, /^\\/mobile\\/resetpwd$/];\n    var noRedirectAPI = ['/api/user', '/api/user/token', '/api/user/shoppingcart'];\n    var loginRedirectPath = ['/mobile/me', '/mobile/addresslist', '/mobile/orderaddress', '/mobile/orderlist',\n        '/mobile/invite', '/mobile/coupons', '/mobile/cook', '/mobile/balance', '/mobile/chargebalanceonline'];\n\n    return {\n        'request': function(config) {\n            if ($localStorage.access_token) {\n                config.headers.Authorization = 'Bearer ' + $localStorage.access_token;\n            }\n\n            return config;\n        },\n\n        'responseError': function(response) {\n            // do something on error\n            var redirectPath = '';\n            if (response.status == 401) {\n                // todo: redirect\n                console.log(401);\n                if (noRedirectPath.some(function (RE) {return RE.test(location.pathname)})) {\n                    if (noRedirectAPI.indexOf(response.config.url) != -1) {\n                        return $q.reject(response);\n                    }\n                }\n                if (loginRedirectPath.some(function(path){\n                        return location.pathname.indexOf(path) != -1\n                    })) {\n                    redirectPath = '?redirect=' + location.pathname\n                }\n                setTimeout(function () {\n                    // todo:\n                    location.replace('/mobile/login' + redirectPath);\n                }, 120);\n            }\n            return $q.reject(response);\n        }\n    };\n}]);\n\n\nangular.module('xw.config').config(['$httpProvider', '$compileProvider',\n    function($httpProvider, $compileProvider) {\n        // http interceptor\n        $httpProvider.defaults.headers.common.Accept = 'application/vnd.cook.v1+json';\n        $httpProvider.defaults.headers.common['Access-Control-Allow-Origin'] = 'http://m.xinweicook.com';\n        $httpProvider.defaults.headers.common['Accept-Language'] = navigator.language == 'zh-CN' ? 'zh-CN' : 'en-US';\n        $httpProvider.defaults.headers.common['Content-Type'] = 'application/json';\n\n        $httpProvider.interceptors.push('commonInterceptor');\n\n        // disable debug data for performance.\n        $compileProvider.debugInfoEnabled(false);\n    }\n]);\n\n\nangular.pick = function (obj) {\n    var keys = Array.prototype.slice.call(arguments, 1);\n    return keys.reduce(function (o, k) {\n        o[k] = obj[k];\n        return o;\n    }, {});\n};\n\nangular.sort = function sort (_array, compare) {\n    var array = _array.slice(0);\n    var tmp;\n    for (var l = array.length - 1; l >= 1; l--) {\n        for (var i = 0; i < l; i++) {\n            var result = compare(array[i], array[i + 1]);\n            if (result > 0) {\n                tmp = array[i];\n                array[i] = array[i + 1];\n                array[i + 1] = tmp;\n            }\n        }\n    }\n    return array;\n};\n"],"sourceRoot":"/source/"}