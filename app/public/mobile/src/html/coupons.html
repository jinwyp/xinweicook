<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1,user-scalable=no">
    <%- include('includes/css') %>
    <style>
        [ng-cloak] {display:none;}
    </style>
    <title>优惠券</title>
    <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?bd3701195d6b839a7858b504dea63bb5";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</head>
<body ng-app="xw" ng-controller="couponsCtrl">

<nav class="order-nav nav">
    <div class="back-icon" ng-click="back()"></div>
    <span class="no-bottom-border">优惠券</span>
</nav>

<div ng-cloak class="coupons-main">
    <form name="codeForm" class="form-horizontal">
        <div class="form-block">
            <div class="form-group promotion-group">
                <label for="invitationCode" class="control-label col-xs-3">朋友的邀请码</label>
                <div class="col-xs-7">
                    <input required name="invitationCode" maxlength="8" minlength="8" ng-model="invitationCode" id="invitationCode" placeholder="8位邀请码" type="text" class="form-control"/>
                </div>
                <span class="flat-button"
                      ng-class="{invalid: codeForm.invitationCode.$invalid}"
                      ng-click="codeForm.invitationCode.$valid && apply()">兑换</span>
            </div>
        </div>

        <div class="form-block">
            <h5>优惠券</h5>
            <hr class="form-line"/>
            <div class="table-wrapper">
                <table ng-if="couponList.length" class="table table-striped table-bordered table-hover table-responsive">
                    <thead>
                    <tr>
                        <th>优惠券名称</th>
                        <th>价值</th>
                        <th>最小订单金额</th>
                        <th>已使用?</th>
                        <th>开始时间</th>
                        <th>截至时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="coupon in couponList">
                        <td>{{coupon.name.zh}}</td>
                        <td>{{coupon.price}}</td>
                        <td>{{coupon.priceLimit}}</td>
                        <td>{{coupon.isUsed ? '是' : '否'}}</td>
                        <td>{{coupon.startDate | date:'yyyy-MM-dd HH:mm'}}</td>
                        <td>{{coupon.endDate | date:'yyyy-MM-dd HH:mm'}}</td>
                    </tr>
                    </tbody>
                </table>

                <p ng-if="!couponList.length">您尚未拥有优惠券哦</p>
            </div>
        </div>
    </form>
</div>
</body>

<%- include('includes/js') %>
<!-- build:inlinejs -->
<script src="/mobile/src/js/controllers/coupons.js"></script>
<!-- endbuild -->
</html>