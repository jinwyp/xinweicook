<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" href="/components/normalize.css/normalize.css"/>
    <link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/mobile/src/css/main.css"/>
    <title>地址管理.</title>
    <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?bd3701195d6b839a7858b504dea63bb5";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</head>
<body ng-app="xw" ng-controller="addressEditCtrl" class="address-edit-body">

<nav class="address-edit-nav nav">
    <div class="back-icon" ng-click="back()"></div>
    <span class="no-bottom-border">编辑收货地址</span>
    <span ng-class="{active: formValid()}" class="next-step" ng-click="updateAddress()">下一步</span>
</nav>

<div class="address-edit-form" ng-cloak>
    <form class="form-horizontal" name="signInForm">
        <div class="login-form-group">
            <div class="form-inline">
                <div ng-if="!css.showFakeInput">
                    <select required name="province" id="province" class="form-control"
                            ng-options="province.Name for province in Address" ng-model="address.province"></select>

                    <select required name="city" id="city" class="form-control"
                            ng-options="city.Name for city in address.province.City" ng-model="address.city"></select>

                    <select required name="district" id="district" class="form-control"
                            ng-options="district.Name for district in address.city.Region" ng-model="address.district"></select>
                </div>

                <!-- -->
                <input type="text" class="form-control" placeholder="省、市、区" ng-if="css.showFakeInput == true" ng-click="css.showFakeInput = false"/>
                <!--<input type="text" class="form-control" placeholder="省、市、区" name="username"-->
                       <!--required ng-model="loginData.username"/>-->

            </div>
            <hr class="form-line"/>
            <input type="text" class="form-control" placeholder="写字楼、小区、学校、街道" name="username"
                   required ng-model="address.street" ng-model-options="{debounce: 400}" ng-change="search()"/>
            <div class="suggestion-addresses-wrapper" ng-if="searchAddresses">
                <h5 class="text-center">请选择收货地址</h5>
                <ul class="search-addresses">
                    <li ng-repeat="addr in searchAddresses" ng-click="setStreet(addr)">
                        <div class="name">{{addr.name}}</div>
                        <div class="general-address">{{addr.city + addr.district}}</div>
                    </li>
                </ul>
                <div class="address-not-found" ng-if="css.showAddressTip && address.street">
                    很抱歉, 没有找到与当前街道匹配的地址. 请适当删减街道关键字以进行重新匹配.
                </div>
            </div>


            <hr class="form-line"/>
            <input type="text" class="form-control" placeholder="楼层、门牌号" name="address"
                   required ng-model="address.address"/>
            <hr class="form-line"/>
            <input type="text" class="form-control" placeholder="收货人姓名(至少2个字符)" name="contactPerson"
                   required ng-model="address.contactPerson"/>
            <hr class="form-line"/>
            <div class="form-control-container">
                <input type="tel" class="form-control" placeholder="手机号码" name="mobile"
                       maxlength="11" required
                       ng-pattern="/^(\+?0?86\-?)?1[345789]\d{9}$/"
                       ng-model="address.mobile"/>
                <span class="form-tip" ng-if="signInForm.mobile.$viewValue.length == 11 && signInForm.mobile.$invalid">请输入一个有效的手机号</span>
            </div>

            <div class="action-group clearfix">
                <span ng-if="css.isEdit" ng-click="deleteAddress()"><i class="glyphicon glyphicon-trash"></i><span>删除</span></span>
                <span style="display:none;" class="locate-icon pull-right">定位当前地点</span>
            </div>
        </div>
    </form>
</div>

</body>

<script src="/components/angular/angular.min.js"></script>
<script src="/components/ngstorage/ngStorage.min.js"></script>

<script src="/mobile/dist/js/modules.js"></script>
<script src="/mobile/dist/js/models.js"></script>
<script src="/mobile/dist/js/config.js"></script>
<script src="/mobile/dist/js/service/debug.js"></script>
<script src="/mobile/dist/js/service/address.js"></script>
<script src="/mobile/dist/js/service/scope-decorator.js"></script>
<script src="/mobile/dist/js/service/map.js"></script>
<script src="/mobile/dist/js/controllers/address-edit.js"></script>
</html>