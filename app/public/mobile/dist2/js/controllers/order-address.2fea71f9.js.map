{"version":3,"names":[],"mappings":"","sources":["order-address.js"],"sourcesContent":["angular.module('xw.controllers').controller('orderAddressCtrl', function (\n    Weixin, $scope, Address, $localStorage, $timeout, $q, Utils) {\n\n    var backUrl = '/mobile';\n\n    $scope.next = function (event) {\n        if ($scope.save) {\n            var promise = $scope.save(event);\n            if (promise && typeof promise.then == 'function') {\n                promise.then(function (address) {\n                    $localStorage.selectedAddress = address;\n                    $timeout(function () {\n                        location.replace(backUrl);\n                    }, 119);\n                })\n            }\n        }\n    };\n\n    function init() {\n        $q.all([Address.range(), Address.getList()]).then(function (res) {\n            $scope.range = res[0].data;\n            $scope.addresses = res[1].data;\n        });\n\n        Weixin.isWeixin && Weixin.getJsconfig().then(function (res) {\n            Weixin.config({\n                nonceStr :res.data.noncestr,\n                timestamp: res.data.timestamp,\n                signature: res.data.signature\n            });\n        });\n\n        var searches = Utils.searches(location.search);\n        if (searches.dishId) {\n            backUrl = '/mobile/cook/' + searches.dishId;\n        } else if (searches.path) {\n            backUrl = '/mobile/#' + searches.path\n        }\n    }\n\n    init();\n});\n"],"file":"js/controllers/order-address.2fea71f9.js","sourceRoot":"/source/"}